function e(e,t,o){if(!(null==e||e instanceof Text||t===o)){null==e._listeners&&(e._listeners={}),null==t&&(t=d),null==o&&(o=d);for(const r in o)null==t[r]&&(delete e._listeners[r],e.removeEventListener(r,n));for(const r in t){const i=t[r],l=o[r];null!=i&&l!==i&&(null==l&&e.addEventListener(r,n),e._listeners[r]=i)}}}function n(e){return this._listeners[e.type].call(this,e)}const t={key:1,ref:1,children:1},o={value:1,checked:1};function r(e,n,t){t=t||"";const o=e.style;if("string"==typeof n)return void(o.cssText=n);const r="string"==typeof t;if(r)o.cssText="";else for(const e in t)null==n[e]&&(o[e]="");for(const e in n){const i=n[e];(r||i!==t[e])&&(o[e]=i)}}function i(e,n,t){const o=Array.isArray;o(n)&&(n=n.join(" ").trim()),o(t)&&(t=t.join(" ").trim()),n!==t&&u(e,"className",n)}function l(e,n,t){c(e,n,t,"_renders"),c(e,n,t,"_renderedBy")}const s={_dom:"_FragmentDomNodeChildren",_FragmentDomNodeChildren:"_dom"};function c(e,n,t,o){let r=e;const i=s[n];for(;r;)i&&(r[i]=null),r[n]=t,r=r[o]}function u(e,n,t){return n in e?e[n]=null==t?"":t:null==t?e.removeAttribute(n):e.setAttribute(n,t)}function p(e,n){null!=n&&c(e,"_parentDom",n,"_renderedBy")}const d={},a=[];function f(e,n,t){return function e(n,t,o,r){if(!n)return t;for(let i=0;i<n.length;i++){const l=n[i];Array.isArray(l)?e(l,t,o,r):r&&null==l||t.push(o?o(l):l)}return t}(e,[],n,t)}function m(e){return"o"===e[0]&&"n"===e[1]}const _=d.hasOwnProperty,h="assign"in Object?d.constructor.assign:function(e){for(let n=1;n<arguments.length;n++){const t=arguments[n];for(const n in t)_.call(t,n)&&(e[n]=t[n])}return e},y=Object.freeze({});function b(e,n,...t){if(null==e||"boolean"==typeof e)return null;null==n&&(n=d);const o=n.ref,r=n.key,i="string"==typeof e?{}:null;let l;return n=function(e,n){const t={},o=null!=n;for(const r in e)null==D[r]&&(t[r]=e[r],o&&m(r)&&(n[r.substr(2).toLowerCase()]=e[r]));return t}(n,i),t.length&&null==n.children&&(l=f(t)),null!=n.children&&(l=f([n.children])),n.children=l,g(e,n,i,r,o)}function g(e,n,t,o,r){const i={type:"string"==typeof e?e.toLowerCase():e,props:n,events:t,key:o,ref:r,_dom:null,_children:null,_component:null,_nextSibDomVNode:null,_renders:null,_renderedBy:null,_prevSibDomVNode:null,_FragmentDomNodeChildren:null,_parentDom:null,_depth:0,__self:null};return i.__self=i,i}const S=function(){},D={key:1,ref:1};function N(e){return null==e||"boolean"==typeof e?b(y):"string"==typeof e||"number"==typeof e?g(null,String(e)):Array.isArray(e)?b(S,null,e):null!=e._dom?g(e.type,e.props,e.events,e.key,null):e}const v="undefined"!=typeof Promise,x="undefined"!=typeof requestAnimationFrame,V=setTimeout,C=v?Promise.prototype.then.bind(Promise.resolve()):V,P={deferImplementation:C,scheduleRender:x?function(e){return requestAnimationFrame(e)}:C,eagerlyHydrate:!0,beforeHookRender:null},w=[],U=[];function A(){F(w)}function k(){F(U)}function F(e){let n;for(;n=e.pop();)L(n)}function B(e){const n=e.name;return"componentDidMount"===n?w.push(e):"componentDidUpdate"===n?U.push(e):void L(e)}function L(e){const n=e.args,t=e.bind,o=e.name;t._lastLifeCycleMethod=o;const r=t[o],i=!!t.componentDidCatch;if(v)Promise.resolve().then(()=>r&&r.apply(t,n)).catch(e=>{if(i)return t.componentDidCatch(e);throw e});else try{r.apply(t,n)}catch(e){if(i)return t.componentDidCatch(e);throw e}}function R(n,t){if(null==n||n===d)return;R(n._renders,t);const o=n._component;let r;t||null==o||(o.setState=S,o._VNode=null,B({name:"componentWillUnmount",bind:o}));const i=n._children;if(i)for(;i.length;)r=i.pop(),R(r,t);!function(n,t){if(!t&&"function"!=typeof n.type){const t=n._dom;null!=t&&(!(n.type===y)&&e(t,null,n.events),function(e){j(E,e)}(t),function(e){if(null==e)return;const n=e.parentNode;n&&n.removeChild(e)}(t))}!function(e,n){if(null!=e){if(!n){var t=e._nextSibDomVNode;if(null!=t){const e=t._dom,n=e&&e.previousSibling;l(t,"_prevSibDomVNode",n&&n._VNode)}const n=e._prevSibDomVNode;if(null!=n){const e=n._dom,t=e&&e.nextSibling;l(n,"_nextSibDomVNode",t&&t._VNode)}}j(H,e)}}(n,t)}(n,t)}const E={_VNode:1,_listeners:1,onclick:1},H={events:1,_FragmentDomNodeChildren:1,_children:1,_component:1,_depth:1,_dom:1,_nextSibDomVNode:1,_prevSibDomVNode:1,_renderedBy:1,_renders:1,_parentDom:1};function j(e,n){if(null!=n)for(const t in e)n[t]=null}function M(e,n,t,o){return function(e,n,t,o,r){const i=e.type===S,l=n.length,s=Math.max(l,t.length);for(let u=0;u<s;u++){const s=n[u]||(u<l?b(y):null),p=t[u]||d;if(null==p._nextSibDomVNode){const n=i?e._nextSibDomVNode:null;null!=n&&c(s,"_nextSibDomVNode",n,"_renderedBy")}J(s,p,o,null,r),i&&null!=s&&O(e,s,u)}if(i&&l){const n=e._children;c(e,"_nextSibDomVNode",n[l-1]._nextSibDomVNode,"_renderedBy"),c(e,"_prevSibDomVNode",n[0]._prevSibDomVNode,"_renderedBy")}}(e,e._children||a,(n||d)._children||a,t,o)}function O(e,n,t){const o=n&&(n._dom||n._FragmentDomNodeChildren);let r=e._FragmentDomNodeChildren;null==r&&(r=[],c(e,"_FragmentDomNodeChildren",r,"_renderedBy")),r[t]=o}const q=[];class T{constructor(e){this.state={},this.props=e}render(e,n){return null}setState(e){if(this._oldState=h({},this.state),this._nextState=h({},this.state),"function"==typeof e){const n=e(this._nextState,this.props);if(null==n)return;h(this._nextState,n)}else h(this._nextState,e);var n;this.state=this._nextState,(n=this)._dirty=!0,1===q.push(n)&&P.scheduleRender(W)}forceUpdate(e){const n=!1!==e;this.base=J(this._VNode,h({},this._VNode),this._VNode._parentDom,n,{depth:this._depth}),"function"==typeof e&&e(),A(),k()}}function W(){let e;for(q.sort((e,n)=>e._depth-n._depth);e=q.pop();)e._dirty&&(e._dirty=!1,e.forceUpdate(!1))}const K=e=>"function"==typeof e&&e!==S,$={_nextSibDomVNode:1,_prevSibDomVNode:1};function I(e,n){if(n._renders=e,e){e._renderedBy=n;for(const t in $)e[t]=n[t]}}function z(e){return this.constructor(e)}function G(e,n,t){const o=h({},e.state||d,e._nextState||d),r=function(e,n,t){const o=e.getDerivedStateFromProps;return null!=o?h({},o(n,t)):null}(n,t.props,o);r&&h(o,r),e._nextState=o}function J(n,s,c,a,_){if("boolean"==typeof n&&(n=null),null==s&&(s=d),null==n)return void R(s);if(n===d)return null;if(!((h=n)&&h.__self===h||(console.warn("component not of expected type =>",h),0)))return null;var h;if(s===n)return n._dom;!function(e,n){if(n===d||null==e||null==n)return;const t=n._prevSibDomVNode;null==e._prevSibDomVNode&&null!=t&&(l(e,"_prevSibDomVNode",t),l(t,"_nextSibDomVNode",e));const o=n._nextSibDomVNode;null==e._nextSibDomVNode&&null!=o&&(l(e,"_nextSibDomVNode",o),l(o,"_prevSibDomVNode",e))}(n,s);let b=s.type,g=n.type,D=K(g);g===b&&D&&(n._component=s._component),g!==b&&(R(s),s=d);const v=n;return"string"!=typeof n.props&&g!==y&&(n=function(e,n,t,o){let r;return null!=e&&K(r=e.type)?(n=n||d,function(e){const n=e.prototype;return!(!n||!n.render)}(r)?function(e,n,t,o){let r;const i=e.type;let l=e._component;if(null!=l){if(null!=l.shouldComponentUpdate&&!t&&!1===l.shouldComponentUpdate(e.props,l._nextState||l.state))return d;G(l,i,e),B({bind:l,name:"componentWillUpdate",args:[e.props,l._nextState]}),r="componentDidUpdate"}else r="componentDidMount",l=new i(e.props),e._component=l,G(l,i,e),B({bind:l,name:"componentWillMount"}),l._depth=++o.depth;l._VNode=e;const s=l._oldState,c=n.props;l.state=l._nextState,l._oldState=null,l._nextState=null,l.props=e.props;const u=N(l.render(l.props,l.state));return B({bind:l,name:r,args:"componentDidUpdate"===r?[c,s]:[]}),I(u,e),u}(e,n,t,o):function(e,n){let t;const o=e.type;let r;return e._component?r=e._component:(r=new T(e.props),e._component=r,r.render=z,r.constructor=o,r.props=e.props),t=N(r.render(e.props)),r._depth=++n.depth,I(t,e),t}(e,o)):e}(n,s,a,_)),K(s.type)&&(s=s._renders),n!==v?J(n,s,c,a,_):(n._children=function(e){const n=e.props.children;return null==n&&e.type!==S?[]:f([n],N)}(n),b=s.type,g=n.type,p(n,c),g===S?M(n,s,c,_):(b!==g&&(s=null),function(n,s,c){const a=(s=s||d)===d;let f;const _=s._dom;f=n.type!==s.type||null==_?function(e){if("string"==typeof e.props)return document.createTextNode("");{const n=e.type;if(n===y)return document.createComment("");const t=document.createElement(n);return t.onclick=S,t}}(n):_,f._VNode=n,function(n,l,s){if(l.type===y)return;if(s=s||d,"string"==typeof l.props)return function(e,n,t){return n===t||(e.nodeValue=n)}(n,l.props,s.props);const c=s.props||d,p=l.props;null!=c&&function(e,n,o){for(const r in n)m(r)||r in t||null==o[r]&&u(e,r,null)}(n,c,p),function(e,n,l){for(let s in l){if(m(s)||s in t)continue;let c=l[s],p=o[s]?e[s]:n[s];c!==p&&(s="class"===s?"className":s,"className"!==s?"style"!==s?u(e,s,c):r(e,c,p):i(e,c,p))}}(n,c,p),e(n,l.events,s.events)}(f,n,a?null:s),l(n,"_dom",f),function e(n,t){n&&(null!=n._component?n._component.base=t:e(n._renderedBy,t))}(n,f),a&&function(e,n,t){const o=function(e){if(!e)return;const n=e._dom;if(n)return n;const t=e._FragmentDomNodeChildren;return t?function e(n){for(let t=0;t<n.length;t++){const o=n[t];if(Array.isArray(o)){const n=e(o);if(n)return n}else if(o)return o}}(t):void 0}(e._nextSibDomVNode),r=e._dom;r&&(function(e,n,t){let o,r=!0;n&&n!==e&&(r=!1,o=n),!r&&o?t.insertBefore(e,o):t.appendChild(e)}(r,o,n),function(e){const n=e._dom;null==e._parentDom&&p(e,n.parentNode);let t=e._nextSibDomVNode;if(null==t){const e=n.nextSibling;null!=e&&(t=e._VNode)}l(t,"_prevSibDomVNode",e),l(e,"_nextSibDomVNode",t);let o=e._prevSibDomVNode;if(null==o){const e=n.previousSibling;null!=e&&(o=e._VNode)}l(o,"_nextSibDomVNode",e),l(e,"_prevSibDomVNode",o)}(e))}(n,c)}(n,s,c),M(n,s,n._dom,_)),n._dom)}function Q(e,n){const t=b(S,null,e);n.hasChildNodes()&&function(e){let n;for(;n=e.firstChild;)e.removeChild(n)}(n),J(t,null,n,!1,{depth:0}),A(),k()}class X extends T{componentDidMount(){this._init()}componentDidUpdate(e){(e&&(e.promise||e.componentPromise))!==(this.props.promise||this.props.componentPromise)&&this._init()}_init(){this.setState({inProgress:!0}),(this.props.promise||this.props.componentPromise)().then(e=>{e.__self||(e=b(e)),this.setState({render:e,inProgress:!1})}).catch(e=>this.setState({error:!0,inProgress:!1}))}render(e,n){return n.inProgress?Y(e.fallback||e.fallbackComponent)||"Loading":n.error?Y(e.errorComponent)||"An Error Occured":n.render}}function Y(e){return null==e||e.__self?e:b(e)}function Z(){const e=["[DeprecationWarning]"].concat(a.slice.call(arguments));console.warn.apply(console,e)}const ee=/\/+$/;function ne(e){return 1===e.length?e:e.replace(ee,"")}const te=[],oe={subscribe(e){te.includes(e)||te.push(e)},unsubscribe(e){for(let n=0;n<te.length;n++)if(te[n]===e)return te.splice(n,1)},emit(e,n){for(const t of te)t(e,n)},unsubscribeAll(){te.length=0}};function re(e){window.history.pushState(null,"",e),oe.emit(e,{type:"load",native:!1})}function ie(e){window.history.replaceState(null,"",e),oe.emit(e,{type:"redirect",native:!1})}class le extends T{constructor(e){super(e),this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this)}static __emitter(){oe.emit(le.path+le.qs,{type:"popstate",native:!0})}static get path(){return location.pathname}static get qs(){return location.search}static get searchParams(){return new URLSearchParams(le.qs)}componentDidMount(){oe.subscribe(this._routeChangeHandler),window.addEventListener("popstate",le.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",le.__emitter),oe.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return b("div",null,`The Requested URL "${le.path}" was not found`)}_routeChangeHandler(e){const n=ne(le.path);let t=[];this.props.children.forEach(e=>{const o=se(e.props.match),r=o.regex.exec(n);if(r){const n=e.props,i={};for(const e in o.params)i[o.params[e]]=r[e];t.push(b(n.component,{...e.props,params:i}))}}),t.length||(t=b(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:t})}render(e,n){return b(S,null,n.child)}}function se(e){if(null!=e.regex)return e;e=ne(e);const n={};let t=0;return{regex:(o=e.split("/").map(e=>":"===e[0]?(n[++t]=e.substr(1),"(\\S*?)"):e).join("/"),RegExp(`^${o}(/?)$`)),params:n};var o}!function(e,n,t){const o=Object.getOwnPropertyDescriptor(e,void 0).get.bind(e);Object.defineProperty(e,"getPath",{get:()=>(Z("getPath"," has been deprecated."),o())})}(le);const ce=(ue=se,function(){return Z("absolutePath","()' has been deprecated Use 'createRoutePath()' instead"),ue.apply(void 0,a.slice.call(arguments))});var ue;function pe(e){if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault();const n=new URL(e.target.href);re(n.pathname+n.search+n.hash)}function de(e){return null!=e.href&&(e.onClick=pe),b("a",e)}function ae(e){}export default T;export{de as A,X as AsyncComponent,T as Component,S as Fragment,ae as Path,le as Router,oe as RouterSubscription,ce as absolutePath,P as config,b as createElement,se as createRoutePath,b as h,re as loadURL,ie as redirect,Q as render};
//# sourceMappingURL=ui-lib.modern.js.map
