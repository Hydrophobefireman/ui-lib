function n(n,e,o){if(!(null==n||n instanceof Text||e===o)){null==n._listeners&&(n._listeners={}),null==e&&(e=d),null==o&&(o=d);for(const r in o)null==e[r]&&(delete n._listeners[r],n.removeEventListener(r,t));for(const r in e){const i=e[r],s=o[r];null!=i&&s!==i&&(null==s&&n.addEventListener(r,t),n._listeners[r]=i)}}}function t(n){return this._listeners[n.type].call(this,n)}const e={key:1,ref:1,children:1},o={value:1,checked:1};function r(n,t,e){e=e||"";const o=n.style;if("string"==typeof(t=t||""))return void(o.cssText=t);const r="string"==typeof e;if(r)o.cssText="";else for(const n in e)null==t[n]&&(o[n]="");for(const n in t){const i=t[n];(r||i!==e[n])&&(o[n]=i)}}const i=n=>n.trim();function s(n,t,e){const o=Array.isArray;o(t)&&(t=i(t.join(" "))),o(e)&&(e=i(e.join(" "))),t!==e&&p(n,"className",t)}function l(n,t,e){u(n,t,e,"_renders"),u(n,t,e,"_renderedBy")}const c={_dom:"_FragmentDomNodeChildren",_FragmentDomNodeChildren:"_dom"};function u(n,t,e,o){let r=n;const i=c[t];for(;r;)i&&(r[i]=null),r[t]=e,r=r[o]}function p(n,t,e){return t in n?n[t]=null==e?"":e:null==e?n.removeAttribute(t):n.setAttribute(t,e)}function a(n,t){null!=t&&u(n,"_parentDom",t,"_renderedBy")}const d={},f=[];function m(n,t,e){return function n(t,e,o,r){if(!t)return e;for(let i=0;i<t.length;i++){const s=t[i];Array.isArray(s)?n(s,e,o,r):r&&null==s||e.push(o?o(s):s)}return e}(n,[],t,e)}function h(n){return"o"===n[0]&&"n"===n[1]}const _=d.hasOwnProperty,y="assign"in Object?d.constructor.assign:function(n){for(let t=1;t<arguments.length;t++){const e=arguments[t];for(const t in e)_.call(e,t)&&(n[t]=e[t])}return n};function g(n,t){n&&("function"==typeof n?n(t):n.current=t)}function b(n,t,e){const o=n.ref,r=(t||d).ref;o&&o!==r&&(g(o,e),r&&g(t.ref,null))}const S={};function D(n,t,...e){if(null==n||"boolean"==typeof n)return null;null==t&&(t=d);const o=t.ref,r=t.key,i="string"==typeof n?{}:null;let s;return t=function(n,t){const e={},o=null!=t;for(const r in n)null==x[r]&&(e[r]=n[r],o&&h(r)&&(t[r.substr(2).toLowerCase()]=n[r]));return e}(t,i),e.length&&null==t.children&&(s=m(e)),null!=t.children&&(s=m([t.children])),t.children=s,N(n,t,i,r,o)}function N(n,t,e,o,r){const i={type:"string"==typeof n?n.toLowerCase():n,props:t,events:e,key:o,ref:r,_dom:null,_children:null,_component:null,_nextSibDomVNode:null,_renders:null,_renderedBy:null,_prevSibDomVNode:null,_FragmentDomNodeChildren:null,_parentDom:null,_depth:0,__self:null};return i.__self=i,i}const v=function(){},x={key:1,ref:1};function V(n){return null==n||"boolean"==typeof n?D(S):"string"==typeof n||"number"==typeof n?N(null,String(n)):Array.isArray(n)?D(v,null,n):null!=n._dom?N(n.type,n.props,n.events,n.key,null):n}function C(){return{current:null}}const k="undefined"!=typeof Promise,P="undefined"!=typeof requestAnimationFrame,U=setTimeout,w=k?Promise.prototype.then.bind(Promise.resolve()):U,A={deferImplementation:w,scheduleRender:P?function(n){return requestAnimationFrame(n)}:w,eagerlyHydrate:!0},E={hookSetup:v,diffed:v};function F(n,t){let e=E[n];e===v&&(e=null),E[n]=function(){e&&e.apply(0,arguments),t.apply(0,arguments)}}const B=[],L=[];function R(){q(B)}function O(){q(L)}function q(n){let t;for(;t=n.pop();)M(t)}function H(n){const t=n.name;return"componentDidMount"===t?B.push(n):"componentDidUpdate"===t?L.push(n):void M(n)}function M(n){const t=n.args,e=n.bind,o=n.name;e._lastLifeCycleMethod=o;const r=e[o],i=!!e.componentDidCatch;if(!r)return;const s=()=>r.apply(e,t);if(k)Promise.resolve().then(s).catch(n=>{if(i)return e.componentDidCatch(n);throw n});else try{s()}catch(n){if(i)return e.componentDidCatch(n);throw n}}function j(t,e){if(null==t||t===d)return;g(t.ref,null),j(t._renders,e);const o=t._component;let r;e||null==o||(o.setState=v,o.forceUpdate=v,o._VNode=null,H({name:"componentWillUnmount",bind:o}));const i=t._children;if(i)for(;i.length;)r=i.pop(),j(r,e);!function(t,e){if(!e&&"function"!=typeof t.type){const e=t._dom;null!=e&&(!(t.type===S)&&n(e,null,t.events),function(n){$(T,n)}(e),function(n){if(null==n)return;const t=n.parentNode;t&&t.removeChild(n)}(e))}!function(n,t){if(null!=n){if(!t){var e=n._nextSibDomVNode;if(null!=e){const n=e._dom,t=n&&n.previousSibling;l(e,"_prevSibDomVNode",t&&t._VNode)}const t=n._prevSibDomVNode;if(null!=t){const n=t._dom,e=n&&n.nextSibling;l(t,"_nextSibDomVNode",e&&e._VNode)}}$(W,n)}}(t,e)}(t,e)}const T={_VNode:1,_listeners:1,onclick:1},W={events:1,_FragmentDomNodeChildren:1,_children:1,_component:1,_depth:1,_dom:1,_nextSibDomVNode:1,_prevSibDomVNode:1,_renderedBy:1,_renders:1,_parentDom:1};function $(n,t){if(null!=t)for(const e in n)t[e]=null}function I(n,t,e,o){if(n.type!==S)return function(n,t,e,o,r){const i=n.type===v,s=t.length,l=Math.max(s,e.length);for(let c=0;c<l;c++){const l=t[c]||(c<s?D(S):null),p=e[c]||d;if(null==p._nextSibDomVNode){const t=i?n._nextSibDomVNode:null;null!=t&&u(l,"_nextSibDomVNode",t,"_renderedBy")}tn(l,p,o,null,r),i&&null!=l&&K(n,l,c)}if(i&&s){const t=n._children;u(n,"_nextSibDomVNode",t[s-1]._nextSibDomVNode,"_renderedBy"),u(n,"_prevSibDomVNode",t[0]._prevSibDomVNode,"_renderedBy")}}(n,n._children||f,(t||d)._children||f,e,o)}function K(n,t,e){const o=t&&(t._dom||t._FragmentDomNodeChildren);let r=n._FragmentDomNodeChildren;null==r&&(r=[],u(n,"_FragmentDomNodeChildren",r,"_renderedBy")),r[e]=o}const Q=[];class z{constructor(n){this.state={},this.props=n}render(n,t){return null}setState(n){if(this._oldState=y({},this.state),this._nextState=y({},this.state),"function"==typeof n){const t=n(this._nextState,this.props);if(null==t)return;y(this._nextState,t)}else y(this._nextState,n);var t;(t=this)._dirty=!0,1===Q.push(t)&&A.scheduleRender(G)}forceUpdate(n){if(null==this._VNode)return;const t=!1!==n;this.base=tn(this._VNode,y({},this._VNode),this._VNode._parentDom,t,{depth:this._depth}),"function"==typeof n&&n(),R(),O()}}function G(){let n;for(Q.sort((n,t)=>n._depth-t._depth);n=Q.pop();)n._dirty&&(n._dirty=!1,n.forceUpdate(!1))}const J=n=>"function"==typeof n&&n!==v,X={_nextSibDomVNode:1,_prevSibDomVNode:1};function Y(n,t){if(t._renders=n,n){n._renderedBy=t;for(const e in X)n[e]=t[e]}}function Z(n){return this.constructor(n)}function nn(n,t,e){const o=y({},n.state||d,n._nextState||d),r=function(n,t,e){const o=n.getDerivedStateFromProps;return null!=o?y({},o(t,e)):null}(t,e.props,o);r&&y(o,r),n._nextState=o}function tn(t,i,c,u,f){if("boolean"==typeof t&&(t=null),null==i&&(i=d),null==t)return void j(i);if(t===d)return null;if(!((_=t)&&_.__self===_||(console.warn("component not of expected type =>",_),0)))return null;var _;if(i===t)return t._dom;!function(n,t){if(t===d||null==n||null==t)return;const e=t._prevSibDomVNode;null==n._prevSibDomVNode&&null!=e&&(l(n,"_prevSibDomVNode",e),l(e,"_nextSibDomVNode",n));const o=t._nextSibDomVNode;null==n._nextSibDomVNode&&null!=o&&(l(n,"_nextSibDomVNode",o),l(o,"_prevSibDomVNode",n))}(t,i);let y=i.type,g=t.type,D=J(g);g===y&&D&&(t._component=i._component),g!==y&&(j(i),i=d);const N=t;if("string"!=typeof t.props&&g!==S&&(t=function(n,t,e,o){let r;return null!=n&&J(r=n.type)?(t=t||d,function(n){const t=n.prototype;return!(!t||!t.render)}(r)?function(n,t,e,o){let r;const i=n.type;let s=n._component;if(null!=s){if(null!=s.shouldComponentUpdate&&!e&&!1===s.shouldComponentUpdate(n.props,s._nextState||s.state))return d;nn(s,i,n),H({bind:s,name:"componentWillUpdate",args:[n.props,s._nextState]}),r="componentDidUpdate"}else r="componentDidMount",s=new i(n.props),n._component=s,nn(s,i,n),H({bind:s,name:"componentWillMount"}),s._depth=++o.depth;s._VNode=n;const l=s._oldState,c=t.props;s.state=s._nextState,s._oldState=null,s._nextState=null,s.props=n.props;const u=V(s.render(s.props,s.state));return Y(u,n),H({bind:s,name:r,args:"componentDidUpdate"===r?[c,l]:[]}),b(n,t,s),u}(n,t,e,o):function(n,t){let e;const o=n.type;let r;return n._component?r=n._component:(r=new z(n.props),n._component=r,r.render=Z,r.constructor=o,r.props=n.props,r._depth=++t.depth),r._VNode=n,E.hookSetup(r),e=V(r.render(n.props)),E.hookSetup(null),Y(e,n),e}(n,o)):n}(t,i,u,f)),J(i.type)&&(i=i._renders),t!==N)return tn(t,i,c,u,f);let x;return t._children=function(n){const t=n.props.children;return null==t&&n.type!==v?[]:m([t],V)}(t),y=i.type,g=t.type,a(t,c),g===v?I(t,i,c,f):(y!==g&&(i=null),function(t,i,c){const u=(i=i||d)===d;let f;const m=i._dom;f=t.type!==i.type||null==m?function(n){if("string"==typeof n.props)return document.createTextNode("");{const t=n.type;return t===S?document.createComment("$"):document.createElement(t)}}(t):m,f._VNode=t,function(t,i,l){if(i.type===S)return;if(l=l||d,"string"==typeof i.props)return function(n,t,e){return t===e||(n.nodeValue=t)}(t,i.props,l.props);const c=l.props||d,u=i.props;null!=c&&function(n,t,o){for(const r in t)h(r)||r in e||null==o[r]&&p(n,r,null)}(t,c,u),function(n,t,i){for(let l in i){if(h(l)||l in e)continue;let c=i[l],u=o[l]?n[l]:t[l];c!==u&&(l="class"===l?"className":l,"className"!==l?"style"!==l?p(n,l,c):r(n,c,u):s(n,c,u))}}(t,c,u),n(t,i.events,l.events)}(f,t,u?null:i),l(t,"_dom",f),function n(t,e){t&&(null!=t._component?t._component.base=e:n(t._renderedBy,e))}(t,f),u&&function(n,t,e){const o=function(n){if(!n)return;const t=n._dom;if(t)return t;const e=n._FragmentDomNodeChildren;return e?function n(t){for(let e=0;e<t.length;e++){const o=t[e];if(Array.isArray(o)){const t=n(o);if(t)return t}else if(o)return o}}(e):void 0}(n._nextSibDomVNode),r=n._dom;r&&(function(n,t,e){let o,r=!0;t&&t!==n&&(r=!1,o=t),!r&&o?e.insertBefore(n,o):e.appendChild(n)}(r,o,t),function(n){const t=n._dom;null==n._parentDom&&a(n,t.parentNode);let e=n._nextSibDomVNode;if(null==e){const n=t.nextSibling;null!=n&&(e=n._VNode)}l(e,"_prevSibDomVNode",n),l(n,"_nextSibDomVNode",e);let o=n._prevSibDomVNode;if(null==o){const n=t.previousSibling;null!=n&&(o=n._VNode)}l(o,"_nextSibDomVNode",n),l(n,"_prevSibDomVNode",o)}(n))}(t,c)}(t,i,c),x=t._dom,I(t,i,x,f)),E.diffed(t),b(t,i,x),x}function en(n,t){const e=D(v,null,n);t.hasChildNodes()&&function(n){let t;for(;t=n.firstChild;)n.removeChild(t)}(t),tn(e,null,t,!1,{depth:0}),R(),O()}const on=["boolean","string","number"];function rn(n,t){return null==n||on.indexOf(typeof n)>-1||n.__self?n:D(n,t)}class sn extends z{componentDidMount(){this._init()}componentDidUpdate(n){(n&&(n.promise||n.componentPromise))!==(this.props.promise||this.props.componentPromise)&&this._init()}_init(){this.setState({inProgress:!0}),(this.props.promise||this.props.componentPromise)().then(n=>{this.setState({render:n,inProgress:!1})}).catch(n=>this.setState({error:!0,inProgress:!1}))}render(n,t){return t.inProgress?rn(n.fallback||n.fallbackComponent)||"Loading":t.error?rn(n.errorComponent)||"An Error Occured":rn(t.render,function(n,t){t=m([t]);const e={};for(const o in n)-1===t.indexOf(o)&&(e[o]=n[o]);return e}(n,["fallback","fallbackComponent","promise","componentPromise"]))}}function ln(n,t,e,o){return function(){return un(t,"()' has been deprecated"+(e?" Use '"+e+"()' instead":"")),n.apply(o,f.slice.call(arguments))}}function cn(n,t,e){const o=Object.getOwnPropertyDescriptor(n,e).get.bind(n);Object.defineProperty(n,t,{get:ln(o,t,e)})}function un(){const n=["[DeprecationWarning]"].concat(f.slice.call(arguments));console.warn.apply(console,n)}const pn=/\/+$/;function an(n){return 1===n.length?n:n.replace(pn,"")}const dn=[],fn={subscribe(n){dn.includes(n)||dn.push(n)},unsubscribe(n){for(let t=0;t<dn.length;t++)if(dn[t]===n)return dn.splice(t,1)},emit(n,t){for(const e of dn)e(n,t)},unsubscribeAll(){dn.length=0}};function mn(n){window.history.pushState(null,"",n),fn.emit(n,{type:"load",native:!1})}function hn(n){window.history.replaceState(null,"",n),fn.emit(n,{type:"redirect",native:!1})}class _n extends z{constructor(n){super(n),this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this)}static __emitter(){fn.emit(_n.path+_n.qs,{type:"popstate",native:!0})}static get path(){return location.pathname}static get qs(){return location.search}static get searchParams(){return new URLSearchParams(_n.qs)}static _getParams(n,t){const e={};for(const o in n)e[n[o]]=decodeURIComponent(t[o]);return e}static getCurrentParams(n){const t=(n=yn(n)).params,e=n.regex.exec(_n.path);return e?_n._getParams(t,e):{}}componentDidMount(){fn.subscribe(this._routeChangeHandler),window.addEventListener("popstate",_n.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",_n.__emitter),fn.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return D("div",null,`The Requested URL "${_n.path}" was not found`)}_routeChangeHandler(n){const t=an(_n.path);let e=[];this.props.children.forEach(n=>{const o=yn(n.props.match),r=o.regex.exec(t);if(r){const t=n.props,i=_n._getParams(o.params,r);e.push(rn(t.component,y({},n.props,{params:i})))}}),e.length||(e=D(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:e})}render(n,t){return D(v,null,t.child)}}function yn(n){if(null!=n.regex)return n;n=an(n);const t={};let e=0;return{regex:(o=n.split("/").map(n=>":"===n[0]?(t[++e]=n.substr(1),"([^?\\/]+)"):n).join("/"),RegExp(`^${o}(/?)$`)),params:t};var o}cn(_n,"getPath","path"),cn(_n,"getQs","qs");const gn=ln(yn,"absolutePath","createRoutePath");function bn(n){if(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)return;n.stopImmediatePropagation&&n.stopImmediatePropagation(),n.stopPropagation&&n.stopPropagation(),n.preventDefault();const t=new URL(this.href,location.href);mn(t.pathname+t.search+t.hash)}function Sn(n){return null!=n.href&&(n.onClick=bn),D("a",n)}const Dn={};function Nn(n,t){return!n||t.some((t,e)=>t!==n[e])}function vn(n,t,e){return n[t]||(n[t]=e())}function xn(n,t){return"function"==typeof t?t(n):t}let Vn=0,Cn=null;const kn=[];function Pn(n){const t=n.cleanUp;"function"==typeof t&&(t(),n.cleanUp=null)}function Un(n){let t=n.cb;t&&"function"==typeof(t=t())&&(n.cleanUp=t),n.cb=null}function wn(){kn.forEach(n=>{for(const e in n)Pn(t=n[e]),Un(t);var t}),kn.length=0}function An(){return[Cn,Vn++]}function En(n,t){const e=An(),o=e[1],r=e[0]._hooksData;let i=r[o]||{};return Nn(i.args,t)?(r[o]=null,i=vn(r,o,()=>({hookState:n()})),i.args=t,i.hookState):i.hookState}function Fn(n,t){return En(()=>n,t)}function Bn(n){return En(()=>({current:n}),[])}function Ln(){const n=this._pendingEffects;for(const t in n||d)Pn(n[t]);this._pendingEffects=null}function Rn(n,t){const e=An(),o=e[0],r=e[1],i=o._hooksData;let s=i[r]||{};if(!Nn(s.args,t))return;s=vn(i,r,()=>({hookState:n})),s.args=t;const l=o._pendingEffects=o._pendingEffects||{},c=l[r],u=c?Un(c)||c.cleanUp:null;var p;l[r]={cb:n,cleanUp:u},-1===kn.indexOf(p=l)&&kn.push(p),o.componentWillUnmount=Ln}function On(n,t,e){const o=An(),r=o[0],i=vn(r._hooksData,o[1],()=>({hookState:e?e(t):xn(void 0,t)}));return i.args=n,[i.hookState,n=>{const t=i.args(i.hookState,n);i.hookState=t,r.setState({})}]}function qn(n){return On(xn,n)}F("hookSetup",function(n){Cn=n,Vn=0,n&&(n._hooksData||(n._hooksData=[]))}),F("diffed",function(){A.scheduleRender(wn)});export default z;export{Sn as A,sn as AsyncComponent,z as Component,v as Fragment,Dn as Path,_n as Router,fn as RouterSubscription,gn as absolutePath,A as config,D as createElement,C as createRef,yn as createRoutePath,D as h,mn as loadURL,hn as redirect,en as render,Fn as useCallback,Rn as useEffect,En as useMemo,On as useReducer,Bn as useRef,qn as useState};
//# sourceMappingURL=ui-lib.modern.js.map
