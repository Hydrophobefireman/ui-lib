function n(n,t,o){if(!(null==n||n instanceof Text||t===o)){null==n._listeners&&(n._listeners={}),null==t&&(t=h),null==o&&(o=h);for(const r in o)null==t[r]&&(delete n._listeners[r],n.removeEventListener(r,e));for(const r in t){const i=t[r],s=o[r];null!=i&&s!==i&&(null==s&&n.addEventListener(r,e),n._listeners[r]=i)}}}function e(n){return this._listeners[n.type].call(this,n)}const t={key:1,ref:1,children:1},o={value:1,checked:1};function r(n,e,t){t=t||"";const o=n.style;if("string"==typeof(e=e||""))return void(o.cssText=e);const r="string"==typeof t;if(r)o.cssText="";else for(const n in t)null==e[n]&&(o[n]="");for(const n in e){const i=e[n];(r||i!==t[n])&&(o[n]=i)}}const i=n=>n.trim();function s(n,e,t,o){const r=Array.isArray;r(e)&&(e=i(e.join(" "))),r(t)&&(t=i(t.join(" "))),e!==t&&o.batch.push({node:n,action:"setProp",attr:"className",value:e})}function l(n){const e=n._dom;null==n._parentDom&&f(n,e.parentNode);let t=n._nextSibDomVNode;if(null==t){const n=e.nextSibling;null!=n&&(t=n._VNode)}c(t,"_prevSibDomVNode",n),c(n,"_nextSibDomVNode",t);let o=n._prevSibDomVNode;if(null==o){const n=e.previousSibling;null!=n&&(o=n._VNode)}c(o,"_nextSibDomVNode",n),c(n,"_prevSibDomVNode",o)}function c(n,e,t){a(n,e,t,"_renders"),a(n,e,t,"_renderedBy")}const u={_dom:"_FragmentDomNodeChildren",_FragmentDomNodeChildren:"_dom"};function a(n,e,t,o){let r=n;const i=u[e];for(;r;)i&&(r[i]=null),r[e]=t,r=r[o]}const p=/^aria[\-A-Z]/;function d(n,e,t){const o=null==t||!1===t&&!p.test(e);return e in n?n[e]=o?"":t:o?n.removeAttribute(e):n.setAttribute(e,t)}function f(n,e){null!=e&&a(n,"_parentDom",e,"_renderedBy")}function m(n){if(null==n)return;const e=n.parentNode;e&&e.removeChild(n)}const h={},_=[];function y(n,e,t){return function n(e,t,o,r){if(!e)return t;for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)?n(s,t,o,r):r&&null==s||t.push(o?o(s):s)}return t}(n,[],e,t)}function b(n){return"o"===n[0]&&"n"===n[1]}const g=h.hasOwnProperty,S="assign"in Object?h.constructor.assign:function(n){for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t)g.call(t,e)&&(n[e]=t[e])}return n};function D(n,e){n&&("function"==typeof n?n(e):n.current=e)}function v(n,e,t){const o=n.ref,r=(e||h).ref;o&&o!==r&&(D(o,t),r&&D(e.ref,null))}const N={};function V(n,e,...t){if(null==n||"boolean"==typeof n)return null;null==e&&(e=h);const o=e.ref,r=e.key,i="string"==typeof n?{}:null;let s;return e=function(n,e){const t={},o=null!=e;for(const r in n)null==k[r]&&(t[r]=n[r],o&&b(r)&&(e[r.substr(2).toLowerCase()]=n[r]));return t}(e,i),t.length&&null==e.children&&(s=y(t)),null!=e.children&&(s=y([e.children])),e.children=s,x(n,e,i,r,o)}function x(n,e,t,o,r){const i={type:"string"==typeof n?n.toLowerCase():n,props:e,events:t,key:o,ref:r,_dom:null,_children:null,_component:null,_nextSibDomVNode:null,_renders:null,_renderedBy:null,_prevSibDomVNode:null,_FragmentDomNodeChildren:null,_parentDom:null,_depth:0,__self:null};return i.__self=i,i}const C=function(){},k={key:1,ref:1};function P(n){return null==n||"boolean"==typeof n?V(N):"string"==typeof n||"number"==typeof n?x(null,String(n)):Array.isArray(n)?V(C,null,n):null!=n._dom?x(n.type,n.props,n.events,n.key,null):n}function U(){return{current:null}}const w="undefined"!=typeof Promise,A="undefined"!=typeof requestAnimationFrame,F=w?Promise.prototype.then.bind(Promise.resolve()):setTimeout,E={scheduleRender:A?function(n){let e,t;const o=()=>{clearTimeout(t),cancelAnimationFrame(e),n()};t=setTimeout(o,E.RAF_TIMEOUT),e=requestAnimationFrame(o)}:F,eagerlyHydrate:!0,RAF_TIMEOUT:100},B={hookSetup:C,diffed:C};function R(n,e){let t=B[n];t===C&&(t=null),B[n]=function(){t&&t.apply(0,arguments),e.apply(0,arguments)}}const T=[],L=[];function O(n){let e;for(;e=n.pop();)q(e)}function M(n){const e=n.name;return"componentDidMount"===e?T.push(n):"componentDidUpdate"===e?L.push(n):void q(n)}function q(n){const e=n.args,t=n.bind,o=n.name;t._lastLifeCycleMethod=o;const r=t[o],i=!!t.componentDidCatch;if(!r)return;const s=()=>r.apply(t,e);if(w)Promise.resolve().then(s).catch(n=>{if(i)return t.componentDidCatch(n);throw n});else try{s()}catch(n){if(i)return t.componentDidCatch(n);throw n}}function H(n){!function(n){const e=n.length;for(let t=0;t<e;t++){const e=n[t],o=e.node,i=e.action,s=e.refDom,c=e.value,u=e.VNode;switch(i){case"appendChild":s[i](o),l(u);break;case"insertBefore":c.insertBefore(o,s),l(u);break;case"removeAttribute":case"setProp":d(o,e.attr,c);break;case"style":r(o,c.newValue,c.oldValue);break;case"removeChild":m(o)}}n.length=0}(n),B.diffed(),O(T),O(L)}function j(e,t,o){if(null==e||e===h)return;D(e.ref,null),j(e._renders,t,o);const r=e._component;let i;t||null==r||(r.setState=C,r.forceUpdate=C,r._VNode=null,M({name:"componentWillUnmount",bind:r}));const s=e._children;if(s)for(;s.length;)i=s.pop(),j(i,t,o);!function(e,t,o){if(!t&&"function"!=typeof e.type){const t=e._dom;null!=t&&(!(e.type===N)&&n(t,null,e.events),function(n){$(W,n)}(t),o.batch.push({node:t,action:"removeChild"}))}!function(n,e){if(null!=n){if(!e){var t=n._nextSibDomVNode;if(null!=t){const n=t._dom,e=n&&n.previousSibling;c(t,"_prevSibDomVNode",e&&e._VNode)}const e=n._prevSibDomVNode;if(null!=e){const n=e._dom,t=n&&n.nextSibling;c(e,"_nextSibDomVNode",t&&t._VNode)}}$(I,n)}}(e,t)}(e,t,o)}const W={_VNode:1,_listeners:1,onclick:1},I={events:1,_FragmentDomNodeChildren:1,_children:1,_component:1,_depth:1,_dom:1,_nextSibDomVNode:1,_prevSibDomVNode:1,_renderedBy:1,_renders:1,_parentDom:1};function $(n,e){if(null!=e)for(const t in n)e[t]=null}function K(n,e,t,o){if(n.type!==N)return function(n,e,t,o,r){const i=n.type===C,s=e.length,l=Math.max(s,t.length);for(let c=0;c<l;c++){const l=e[c]||(c<s?V(N):null),u=t[c]||h;if(null==u._nextSibDomVNode){const e=i?n._nextSibDomVNode:null;null!=e&&a(l,"_nextSibDomVNode",e,"_renderedBy")}tn(l,u,o,null,r),i&&null!=l&&Q(n,l,c)}if(i&&s){const e=n._children;a(n,"_nextSibDomVNode",e[s-1]._nextSibDomVNode,"_renderedBy"),a(n,"_prevSibDomVNode",e[0]._prevSibDomVNode,"_renderedBy")}}(n,n._children||_,(e||h)._children||_,t,o)}function Q(n,e,t){const o=e&&(e._dom||e._FragmentDomNodeChildren);let r=n._FragmentDomNodeChildren;null==r&&(r=[],a(n,"_FragmentDomNodeChildren",r,"_renderedBy")),r[t]=o}const Z=[];class z{constructor(n){this.state={},this.props=n}render(n,e){return null}setState(n){if(this._oldState=S({},this.state),this._nextState=S({},this.state),"function"==typeof n){const e=n(this._nextState,this.props);if(null==e)return;S(this._nextState,e)}else S(this._nextState,n);var e;(e=this)._dirty=!0,1===Z.push(e)&&E.scheduleRender(G)}forceUpdate(n){if(null==this._VNode)return;const e=[],t=!1!==n;this.base=tn(this._VNode,S({},this._VNode),this._VNode._parentDom,t,{depth:this._depth,batch:e}),"function"==typeof n&&n(),H(e)}}function G(){let n;for(Z.sort((n,e)=>n._depth-e._depth);n=Z.pop();)n._dirty&&(n._dirty=!1,n.forceUpdate(!1))}const J=n=>"function"==typeof n&&n!==C,X={_nextSibDomVNode:1,_prevSibDomVNode:1};function Y(n,e){if(e._renders=n,n){n._renderedBy=e;for(const t in X)n[t]=e[t]}}function nn(n){return this.constructor(n)}function en(n,e,t){const o=S({},n.state||h,n._nextState||h),r=function(n,e,t){const o=n.getDerivedStateFromProps;return null!=o?S({},o(e,t)):null}(e,t.props,o);r&&S(o,r),n._nextState=o}function tn(e,r,i,l,u){if("boolean"==typeof e&&(e=null),null==r&&(r=h),null==e)return void j(r,!1,u);if(e===h)return null;if(!((a=e)&&a.__self===a||(console.warn("component not of expected type =>",a),0)))return null;var a;if(r===e)return e._dom;!function(n,e){if(e===h||null==n||null==e)return;const t=e._prevSibDomVNode;null==n._prevSibDomVNode&&null!=t&&(c(n,"_prevSibDomVNode",t),c(t,"_nextSibDomVNode",n));const o=e._nextSibDomVNode;null==n._nextSibDomVNode&&null!=o&&(c(n,"_nextSibDomVNode",o),c(o,"_prevSibDomVNode",n))}(e,r);let p=r.type,d=e.type,m=J(d);d===p&&m&&(e._component=r._component),d!==p&&(j(r,!1,u),r=h);const _=e;if("string"!=typeof e.props&&d!==N&&(e=function(n,e,t,o){let r;return null!=n&&J(r=n.type)?(e=e||h,function(n){const e=n.prototype;return!(!e||!e.render)}(r)?function(n,e,t,o){let r;const i=n.type;let s=n._component;if(null!=s){if(null!=s.shouldComponentUpdate&&!t&&!1===s.shouldComponentUpdate(n.props,s._nextState||s.state))return h;en(s,i,n),M({bind:s,name:"componentWillUpdate",args:[n.props,s._nextState]}),r="componentDidUpdate"}else r="componentDidMount",s=new i(n.props),n._component=s,en(s,i,n),M({bind:s,name:"componentWillMount"}),s._depth=++o.depth;s._VNode=n;const l=s._oldState,c=e.props;s.state=s._nextState,s._oldState=null,s._nextState=null,s.props=n.props;const u=P(s.render(s.props,s.state));return Y(u,n),M({bind:s,name:r,args:"componentDidUpdate"===r?[c,l]:[]}),v(n,e,s),u}(n,e,t,o):function(n,e){let t;const o=n.type;let r;return n._component?r=n._component:(r=new z(n.props),n._component=r,r.render=nn,r.constructor=o,r.props=n.props,r._depth=++e.depth),r._VNode=n,B.hookSetup(r),t=P(r.render(n.props)),B.hookSetup(null),Y(t,n),t}(n,o)):n}(e,r,l,u)),J(r.type)&&(r=r._renders),e!==_)return tn(e,r,i,l,u);let g;return e._children=function(n){const e=n.props.children;return null==e&&n.type!==C?[]:y([e],P)}(e),p=r.type,d=e.type,f(e,i),d===C?K(e,r,i,u):(p!==d&&(r=null),function(e,r,i,l){const u=(r=r||h)===h;let a;const p=r._dom;a=e.type!==r.type||null==p?function(n){if("string"==typeof n.props)return document.createTextNode("");{const e=n.type;return e===N?document.createComment("$"):document.createElement(e)}}(e):p,a._VNode=e,function(e,r,i,l){if(r.type===N)return;if(i=i||h,"string"==typeof r.props)return function(n,e,t){return e===t||(n.nodeValue=e)}(e,r.props,i.props);const c=i.props||h,u=r.props;null!=c&&function(n,e,o,r){for(const i in e)b(i)||i in t||null==o[i]&&r.batch.push({node:n,action:"removeAttribute",attr:i})}(e,c,u,l),function(n,e,r,i){for(let l in r){if(b(l)||l in t)continue;let c=r[l],u=o[l]?n[l]:e[l];c!==u&&(l="class"===l?"className":l,"className"!==l?i.batch.push("style"!==l?{node:n,action:"setProp",attr:l,value:c}:{node:n,action:"style",value:{newValue:c,oldValue:u}}):s(n,c,u,i))}}(e,c,u,l),n(e,r.events,i.events)}(a,e,u?null:r,l),c(e,"_dom",a),function n(e,t){e&&(null!=e._component?e._component.base=t:n(e._renderedBy,t))}(e,a),u&&function(n,e,t,o){const r=function(n){if(!n)return;const e=n._dom;if(e)return e;const t=n._FragmentDomNodeChildren;return t?function n(e){for(let t=0;t<e.length;t++){const o=e[t];if(Array.isArray(o)){const e=n(o);if(e)return e}else if(o)return o}}(t):void 0}(n._nextSibDomVNode),i=n._dom;if(i){let t,s=!0;r&&r!==i&&(s=!1,t=r),o.batch.push(!s&&t?{node:i,action:"insertBefore",refDom:t,value:e,VNode:n}:{node:i,action:"appendChild",refDom:e,VNode:n})}}(e,i,0,l)}(e,r,i,u),g=e._dom,K(e,r,g,u)),v(e,r,g),g}function on(n,e){const t=V(C,null,n);e.hasChildNodes()&&function(n){let e;for(;e=n.firstChild;)n.removeChild(e)}(e);const o=[];tn(t,null,e,!1,{depth:0,batch:o}),H(o)}const rn=["boolean","string","number"];function sn(n,e){return null==n||rn.indexOf(typeof n)>-1||n.__self?n:V(n,e)}class ln extends z{componentDidMount(){this._init()}componentDidUpdate(n){(n&&(n.promise||n.componentPromise))!==(this.props.promise||this.props.componentPromise)&&this._init()}_init(){this.setState({inProgress:!0}),(this.props.promise||this.props.componentPromise)().then(n=>{this.setState({render:n,inProgress:!1})}).catch(n=>this.setState({error:!0,inProgress:!1}))}render(n,e){return e.inProgress?sn(n.fallback||n.fallbackComponent)||"Loading":e.error?sn(n.errorComponent)||"An Error Occured":sn(e.render,function(n,e){e=y([e]);const t={};for(const o in n)-1===e.indexOf(o)&&(t[o]=n[o]);return t}(n,["fallback","fallbackComponent","promise","componentPromise"]))}}function cn(n,e,t,o){return function(){return an(e,"()' has been deprecated"+(t?" Use '"+t+"()' instead":"")),n.apply(o,_.slice.call(arguments))}}function un(n,e,t){const o=Object.getOwnPropertyDescriptor(n,t).get.bind(n);Object.defineProperty(n,e,{get:cn(o,e,t)})}function an(){const n=["[DeprecationWarning]"].concat(_.slice.call(arguments));console.warn.apply(console,n)}const pn=/\/+$/;function dn(n){return 1===n.length?n:n.replace(pn,"")}const fn=[],mn={subscribe(n){fn.includes(n)||fn.push(n)},unsubscribe(n){for(let e=0;e<fn.length;e++)if(fn[e]===n)return fn.splice(e,1)},emit(n,e){for(const t of fn)t(n,e)},unsubscribeAll(){fn.length=0}};function hn(n){window.history.pushState(null,"",n),mn.emit(n,{type:"load",native:!1})}function _n(n){window.history.replaceState(null,"",n),mn.emit(n,{type:"redirect",native:!1})}class yn extends z{constructor(n){super(n),this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this)}static __emitter(){mn.emit(yn.path+yn.qs,{type:"popstate",native:!0})}static get path(){return location.pathname}static get qs(){return location.search}static get searchParams(){return new URLSearchParams(yn.qs)}static _getParams(n,e){const t={};for(const o in n)t[n[o]]=decodeURIComponent(e[o]);return t}static getCurrentParams(n){const e=(n=bn(n)).params,t=n.regex.exec(yn.path);return t?yn._getParams(e,t):{}}componentDidMount(){mn.subscribe(this._routeChangeHandler),window.addEventListener("popstate",yn.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",yn.__emitter),mn.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return V("div",null,`The Requested URL "${yn.path}" was not found`)}_routeChangeHandler(n){const e=dn(yn.path);let t=[];this.props.children.forEach(n=>{const o=bn(n.props.match),r=o.regex.exec(e);if(r){const e=n.props,i=yn._getParams(o.params,r);t.push(sn(e.component,S({},n.props,{params:i})))}}),t.length||(t=V(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:t})}render(n,e){return V(C,null,e.child)}}function bn(n){if(null!=n.regex)return n;n=dn(n);const e={};let t=0;return{regex:(o=n.split("/").map(n=>":"===n[0]?(e[++t]=n.substr(1),"([^?\\/]+)"):n).join("/"),RegExp(`^${o}(/?)$`)),params:e};var o}un(yn,"getPath","path"),un(yn,"getQs","qs");const gn=cn(bn,"absolutePath","createRoutePath");function Sn(n){if(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)return;n.stopImmediatePropagation&&n.stopImmediatePropagation(),n.stopPropagation&&n.stopPropagation(),n.preventDefault();const e=new URL(this.href,location.href);hn(e.pathname+e.search+e.hash)}function Dn(n){return null!=n.href&&(n.onClick=Sn),V("a",n)}const vn={};function Nn(n,e){return!n||e.some((e,t)=>e!==n[t])}function Vn(n,e,t){return n[e]||(n[e]=t())}function xn(n,e){return"function"==typeof e?e(n):e}let Cn=0,kn=null;const Pn=[];function Un(n){const e=n.cleanUp;"function"==typeof e&&(e(),n.cleanUp=null)}function wn(n){let e=n.cb;e&&"function"==typeof(e=e())&&(n.cleanUp=e),n.cb=null}function An(){Pn.forEach(n=>{for(const t in n)(e=n[t]).resolved||Un(e),wn(e);var e}),Pn.length=0}function Fn(){return[kn,Cn++]}function En(n,e){const t=Fn(),o=t[1],r=t[0]._hooksData;let i=r[o]||{};return Nn(i.args,e)?(r[o]=null,i=Vn(r,o,()=>({hookState:n()})),i.args=e,i.hookState):i.hookState}function Bn(n,e){return En(()=>n,e)}function Rn(n){return En(()=>({current:n}),[])}function Tn(){const n=this._pendingEffects;for(const e in n||h)Un(n[e]);this._pendingEffects=null}function Ln(n,e){const t=Fn(),o=t[0],r=t[1],i=o._hooksData;let s=i[r]||{};const l=o._pendingEffects=o._pendingEffects||{},c=l[r];if(!Nn(s.args,e))return void(c&&(c.resolved=!0));s=Vn(i,r,()=>({hookState:n})),s.args=e;const u=c?wn(c)||c.cleanUp:null;var a;l[r]={cb:n,cleanUp:u},-1===Pn.indexOf(a=l)&&Pn.push(a),o.componentWillUnmount=Tn}function On(n,e,t){const o=Fn(),r=o[0],i=Vn(r._hooksData,o[1],()=>({hookState:t?t(e):xn(void 0,e)}));return i.args=n,[i.hookState,n=>{const e=i.args(i.hookState,n);i.hookState=e,r.setState({})}]}function Mn(n){return On(xn,n)}R("hookSetup",function(n){kn=n,Cn=0,n&&(n._hooksData||(n._hooksData=[]))}),R("diffed",function(){E.scheduleRender(An)});export default z;export{Dn as A,ln as AsyncComponent,z as Component,C as Fragment,vn as Path,yn as Router,mn as RouterSubscription,gn as absolutePath,E as config,V as createElement,U as createRef,bn as createRoutePath,V as h,hn as loadURL,_n as redirect,on as render,Bn as useCallback,Ln as useEffect,En as useMemo,On as useReducer,Rn as useRef,Mn as useState};
//# sourceMappingURL=ui-lib.modern.js.map
