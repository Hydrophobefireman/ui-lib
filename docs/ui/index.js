const t={},n=[],e=/^aria[\-A-Z]/,o={};function r(t,n){return function t(n,e,o){if(!n)return e;for(let r=0;r<n.length;r++){const i=n[r];Array.isArray(i)?t(i,e,o):e.push(o?o(i):i)}return e}(t,[],n)}const i=t.hasOwnProperty,s=t.constructor.assign||function(t){for(let n=1;n<arguments.length;n++){const e=arguments[n];for(const n in e)i.call(e,n)&&(t[n]=e[n])}return t},c=function(){};function l(e,o){if(null==e||"boolean"==typeof e)return null;let i;null==o&&(o=t);const s=o.ref,c=o.key;let l;return null!=(o=a(o)).children?l=r([o.children]):(i=n.slice.call(arguments,2)).length&&(l=r(i)),o.children=l,d(e,o,c,s)}const u={key:1,ref:1};function a(t){const n={};for(const e in t)u[e]||(n[e]=t[e]);return n}function p(t){return null==t||"boolean"==typeof t?l(o):"string"==typeof t||"number"==typeof t?d(null,String(t)):Array.isArray(t)?l(c,null,t):null!=t._dom?d(t.type,t.props,t.key):t}function d(t,n,e,o){return{type:t,props:n,key:e,ref:o,_dom:null,_children:null,_component:null,_renders:null,_renderedBy:null,_parentDom:null,_depth:0,constructor:void 0}}const f="undefined"!=typeof Promise,m=f?Promise.prototype.then.bind(Promise.resolve()):t=>setTimeout(t),h="function"==typeof requestAnimationFrame,_={hookSetup:c,diffed:c};function y(t,n){let e=_[t];e===c&&(e=null),_[t]=function(){e&&e.apply(0,arguments),n.apply(0,arguments)}}const b={scheduleRender:h?t=>requestAnimationFrame(t):m,eagerlyHydrate:!0,RAF_TIMEOUT:100,effectDebounce:null};function g(t,n,e){!function(t,n,e){D(t,n,e,"_renders")}(t,n,e),N(t,n,e)}const S={_dom:"_FragmentDomNodeChildren",_FragmentDomNodeChildren:"_dom"};function D(t,n,e,o){let r=t;const i=S[n];for(;r;)i&&(r[i]=null),r[n]=e,r=r[o]}function v(n,e){if(e===t||null==n||null==e)return;const o=e._prevSibDomVNode;null==n._prevSibDomVNode&&null!=o&&(g(n,"_prevSibDomVNode",o),g(o,"_nextSibDomVNode",n));const r=e._nextSibDomVNode;null==n._nextSibDomVNode&&null!=r&&(g(n,"_nextSibDomVNode",r),g(r,"_prevSibDomVNode",n))}function N(t,n,e){D(t,n,e,"_renderedBy")}const V={value:1,checked:1},x={key:1,ref:1,children:1};function C(t,n,e){e=e||"";const o=t.style;if("string"==typeof(n=n||""))return void(o.cssText=n);const r="string"==typeof e;if(r)o.cssText="";else for(const t in e)null==n[t]&&(o[t]="");for(const t in n){const i=n[t];(r||i!==e[t])&&(o[t]=i)}}const k=t=>t.trim();function U(t,n,e,o){const r=Array.isArray;r(n)&&(n=k(n.join(" "))),r(e)&&(e=k(e.join(" "))),n!==e&&o.batch.push({node:t,action:1,attr:"className",value:n})}function P(t,n,e,o){for(const r in n)x[r]||null!=e[r]||null==n[r]||o.batch.push({node:t,action:1,attr:r})}function w(t,n,o){if("o"===n[0]&&"n"===n[1])return function(t,n,e){n=n.substr(2).toLowerCase(),null==e?(t.removeEventListener(n,A),delete t._events[n]):(t.addEventListener(n,A),t._events[n]=e)}(t,n,o);const r=null==o||!1===o&&!e.test(n);return n in t?t[n]=r?"":o:r?t.removeAttribute(n):t.setAttribute(n,o)}function A(t){return this._events[t.type].call(this,t)}function F(t,n){t&&("function"==typeof t?t(n):t.current=n)}function E(n,e,o){const r=n.ref,i=(e||t).ref;r&&r!==i&&(F(r,o),i&&F(e.ref,null))}function T(){return{current:null}}function L(n,e){if(null==n||n===t)return;F(n.ref,null),L(n._renders,e);const r=n._component;null!=r&&(r.setState=c,r.forceUpdate=c,r._VNode=null,K({name:"componentWillUnmount",bind:r}));const i=n._children;let s;if(function(n,e){const r=n.type;if("function"!=typeof r){const i=n._dom;null!=i&&(r!==o&&null!=r&&P(i,n.props,t,e),e.batch.push({node:i,action:2}))}!function(t){if(null==t)return;let n=t._nextSibDomVNode;if(null!=n){const t=n._dom,e=t&&t.previousSibling;g(n,"_prevSibDomVNode",e&&e._VNode)}const e=t._prevSibDomVNode;if(null!=e){const t=e._dom,n=t&&t.nextSibling;g(e,"_nextSibDomVNode",n&&n._VNode)}H(q,t)}(n)}(n,e),i)for(;i.length;)s=i.pop(),L(s,e)}const R={_VNode:1,_events:1};function M(t){H(R,t)}const q={_children:1,_component:1,_depth:1,_dom:1,_renderedBy:1,_renders:1,_parentDom:1,key:1,ref:1,_nextSibDomVNode:1,_prevSibDomVNode:1,_FragmentDomNodeChildren:1};function H(t,n){if(null!=n)for(const e in t)n[e]=null}function O(t){if(null==t)return;const n=t.parentNode;n&&n.removeChild(t)}function B(t){const n=t._dom;let e=t._nextSibDomVNode;if(null==e){const t=n.nextSibling;null!=t&&(e=t._VNode)}g(e,"_prevSibDomVNode",t),g(t,"_nextSibDomVNode",e);let o=t._prevSibDomVNode;if(null==o){const t=n.previousSibling;null!=t&&(o=t._VNode)}g(o,"_nextSibDomVNode",t),g(t,"_prevSibDomVNode",o)}const I=[],W=[];function $(t){let n;for(;n=t.pop();)j(n)}function K(t){const n=t.name;return"componentDidMount"===n?I.push(t):"componentDidUpdate"===n?W.push(t):void j(t)}function j(t){const n=t.name,e=t.bind,o=e[n];if(e._lastLifeCycleMethod=n,!o)return;const r=t.args,i="function"==typeof e.componentDidCatch,s=()=>o.apply(e,r);if(f)m(s).catch(t=>{if(!i)throw t;e.componentDidCatch(t)});else try{s()}catch(t){if(i)return e.componentDidCatch(t);throw t}}function Z(t){!function(t){const n=t.length;for(let e=0;e<n;e++){const n=t[e],o=n.node,r=n.refDom,i=n.value,s=n.VNode;switch(n.action){case 4:r.appendChild(o),B(s);break;case 5:i.insertBefore(o,r),B(s);break;case 1:w(o,n.attr,i);break;case 3:C(o,i.newValue,i.oldValue);break;case 2:O(o),M(o)}}}(t),_.diffed(),$(I),$(W)}const z=[];class G{constructor(t){this.state={},this.props=t}render(t,n){return null}setState(t){if(this._oldState=s({},this.state),this._nextState=s({},this._nextState||this.state),"function"==typeof t){const n=t(this._nextState,this.props);if(null==n)return;s(this._nextState,n)}else s(this._nextState,t);var n;(n=this)._dirty=!0,1===z.push(n)&&b.scheduleRender(J)}forceUpdate(t){if(null==this._VNode)return;const n=[],e=!1!==t;et(this._VNode,s({},this._VNode),this._VNode._parentDom,e,{depth:this._depth,batch:n}),"function"==typeof t&&t(),Z(n)}}function J(){let t;for(z.sort((t,n)=>t._depth-n._depth);t=z.pop();)t._dirty&&(t._dirty=!1,t.forceUpdate(!1))}const Q=t=>"function"==typeof t&&t!==c;function X(t){return this.constructor(t)}const Y={_nextSibDomVNode:1,_prevSibDomVNode:1};function tt(e,r,i,s){if(e.type===o)return;const u=e._children||n,a=(r||t)._children||n;return u!==a?function(n,e,r,i,s){const u=n.type===c,a=e.length,p=Math.max(a,r.length);for(let c=0;c<p;c++){const p=e[c]||(c<a?l(o):null);let d=r[c]||t;if(v(p,d),p&&null==p._nextSibDomVNode){const t=u?n._nextSibDomVNode:null;null!=t&&N(p,"_nextSibDomVNode",t)}et(p,d,i,!1,s),u&&null!=p&&nt(n,p,c)}if(u&&a){const t=n._children;N(n,"_nextSibDomVNode",t[a-1]._nextSibDomVNode),N(n,"_prevSibDomVNode",t[0]._prevSibDomVNode)}}(e,u,a,i,s):void 0}function nt(t,n,e){const o=n&&(n._dom||n._FragmentDomNodeChildren);let r=t._FragmentDomNodeChildren;null==r&&(r=[],N(t,"_FragmentDomNodeChildren",r)),r[e]=o}function et(n,e,i,l,u){if(null==n||"boolean"==typeof n)return void L(e,u);if(!((a=n)&&void 0===a.constructor||(console.warn("component not of expected type =>",a),0)))return null;var a;if(e===n)return n._dom;let d=(e=e||t).type,f=n.type,m=Q(f);f===d&&m&&(n._component=e._component),n._parentDom=i,f!==d&&(L(e,u),e=t);const h=n;if("string"!=typeof n.props&&f!==o&&(n=function(n,e,o,r){let i;if(null!=n&&Q(i=n.type)){let c;return e=e||t,c=function(t){const n=t.prototype;return!(!n||!n.render)}(i)?function(n,e,o,r){let i;const c=n.type;let l=n._component;const u=null!=l;if(u){if(i="componentDidUpdate",null!=l.shouldComponentUpdate&&!o&&!1===l.shouldComponentUpdate(n.props,l._nextState||l.state))return t}else i="componentDidMount",l=new c(n.props),n._component=l,l._depth=++r.depth;l._VNode=n;const a=l._oldState,d=e.props;K({bind:l,name:u?"componentWillUpdate":"componentWillMount",args:u?[n.props,l._nextState]:null}),l.state=function(n,e,o){const r=s({},n.state||t,n._nextState||t),i=function(t,n,e){const o=t.getDerivedStateFromProps;return null!=o?s({},o(n,e)):null}(e,o.props,r);return i&&s(r,i),r}(l,c,n),l._oldState=null,l._nextState=null,l.props=n.props;const f=p(l.render(l.props,l.state));return K({bind:l,name:i,args:"componentDidUpdate"===i?[d,a]:[]}),E(n,e,l),f}(n,e,o,r):function(t,n){let e;const o=t.type;let r;return t._component?r=t._component:(r=new G(t.props),t._component=r,r.render=X,r.constructor=o,r.props=t.props,r._depth=++n.depth),r._VNode=t,_.hookSetup(r),e=p(r.render(t.props)),_.hookSetup(null),e}(n,r),function(t,n){n._renders=t,t._renderedBy=n;for(const e in Y)t[e]=n[e]}(c,n),c}return n}(n,e,l,u)),Q(e.type)&&(e=e._renders),n!==h){if(n===t)return;return et(n,e,i,l,u)}let y;return n._children=function(t){let n=t.props.children;if(t.type!==c){if(null==n)return[]}else n&&!n.length&&(n=null);return r([n],p)}(n),d=e.type,f=n.type,f===c?tt(n,e,i,u):(d!==f&&(e=null),function(n,e,r,i){const s=(e=e||t)===t;let c;const l=e._dom;c=n.type!==e.type||null==l?function(t){if("string"==typeof t.props)return document.createTextNode("");{const n=t.type;if(n===o)return document.createComment("$");const e=document.createElement(n);return e._events={},e}}(n):l,c._VNode=n,N(n,"_dom",c),function(n,e,r,i){if(e.type===o)return;if(r=r||t,"string"==typeof e.props)return function(t,n,e){return n===e||(t.nodeValue=n)}(n,e.props,r.props);const s=r.props,c=e.props;null!=s&&P(n,s,c,i),function(t,n,e,o){for(let r in e){if(r in x)continue;let i=e[r],s=V[r]?t[r]:n[r];i!==s&&(r="class"===r?"className":r,"className"!==r?o.batch.push("style"!==r?{node:t,action:1,attr:r,value:i}:{node:t,action:3,value:{newValue:i,oldValue:s}}):U(t,i,s,o))}}(n,s||t,c,i)}(c,n,s?null:e,i),function t(n,e){n&&(null!=n._component?n._component.base=e:t(n._renderedBy,e))}(n,c),s&&function(t,n,e){const o=t._dom;if(!o)return;const r=function(t){if(!t)return;const n=t._dom;if(n)return n;const e=t._FragmentDomNodeChildren;return e?function t(n){for(let e=0;e<n.length;e++){const o=n[e];if(Array.isArray(o)){const n=t(o);if(n)return n}else if(o)return o}}(e):void 0}(t._nextSibDomVNode);let i,s=!0;r&&r!==o&&(s=!1,i=r),e.batch.push(!s&&i?{node:o,action:5,refDom:i,value:n,VNode:t}:{node:o,action:4,refDom:n,VNode:t})}(n,r,i)}(n,e,i,u),y=n._dom,tt(n,e,y,u),E(n,e,y)),y}function ot(t,n){const e=l(c,void 0,[t]);n.hasChildNodes()&&function(t){let n;for(;n=t.firstChild;)t.removeChild(n)}(n);const o=[];et(e,void 0,n,!1,{depth:0,batch:o}),Z(o)}const rt=["boolean","string","number"];function it(t,n){return null==t||rt.indexOf(typeof t)>-1||void 0===t.constructor?t:l(t,n)}class st extends G{componentDidMount(){this._init()}componentDidUpdate(t){(t&&(t.promise||t.componentPromise))!==(this.props.promise||this.props.componentPromise)&&this._init()}_init(){this.setState({inProgress:!0}),(this.props.promise||this.props.componentPromise)().then(t=>{this.setState({render:t,inProgress:!1})}).catch(t=>this.setState({error:!0,inProgress:!1}))}render(t,n){return n.inProgress?it(t.fallback||t.fallbackComponent)||"Loading":n.error?it(t.errorComponent)||"An Error Occured":it(n.render,function(t,n){n=r([n]);const e={};for(const o in t)-1===n.indexOf(o)&&(e[o]=t[o]);return e}(t,["fallback","fallbackComponent","promise","componentPromise"]))}}const ct=/\/+$/;function lt(t){return 1===t.length?t:t.replace(ct,"")}const ut=[],at={subscribe(t){ut.includes(t)||ut.push(t)},unsubscribe(t){for(let n=0;n<ut.length;n++)if(ut[n]===t)return ut.splice(n,1)},emit(t,n){for(const e of ut)e(t,n)},unsubscribeAll(){ut.length=0}};function pt(t){window.history.pushState(null,"",t),at.emit(t,{type:"load",native:!1})}function dt(t){window.history.replaceState(null,"",t),at.emit(t,{type:"redirect",native:!1})}class ft extends G{constructor(t){super(t),this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this)}static __emitter(){at.emit(ft.path+ft.qs,{type:"popstate",native:!0})}static get path(){return location.pathname}static get qs(){return location.search}static get searchParams(){return new URLSearchParams(ft.qs)}static _getParams(t,n){const e={};for(const o in t)e[t[o]]=decodeURIComponent(n[o]);return e}static getCurrentParams(t){const n=(t=mt(t)).params,e=t.regex.exec(ft.path);return e?ft._getParams(n,e):{}}componentDidMount(){at.subscribe(this._routeChangeHandler),window.addEventListener("popstate",ft.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",ft.__emitter),at.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return l("div",null,`The Requested URL "${ft.path}" was not found`)}_routeChangeHandler(t){const n=lt(ft.path);let e=[];this.props.children.forEach(t=>{const o=mt(t.props.match),r=o.regex.exec(n);if(r){const n=t.props,i=ft._getParams(o.params,r);e.push(it(n.component,s({},t.props,{params:i})))}}),e.length||(e=l(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:e})}render(t,n){return l(c,null,n.child)}}function mt(t){if(null!=t.regex)return t;t=lt(t);const n={};let e=0;return{regex:(o=t.split("/").map(t=>":"===t[0]?(n[++e]=t.substr(1),"([^?\\/]+)"):t).join("/"),RegExp(`^${o}(/?)$`)),params:n};var o}function ht(t){if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault();const n=new URL(this.href,location.href);pt(n.pathname+n.search+n.hash)}function _t(t){return null!=t.href&&(t.onClick=ht),l("a",t)}const yt={};function bt(t,n){return!t||n.some((n,e)=>n!==t[e])}function gt(t,n,e){return t[n]||(t[n]=St(0,e))}function St(t,n){return"function"==typeof n?n(t):n}let Dt=0,vt=null;const Nt=[];function Vt(t){const n=t.cleanUp;"function"==typeof n&&(n(),t.cleanUp=null)}function xt(t){let n=t.cb;n&&"function"==typeof(n=n())&&(t.cleanUp=n),t.cb=null}function Ct(){Nt.forEach(t=>{for(const e in t)(n=t[e]).resolved||Vt(n),xt(n);var n}),Nt.length=0}const kt=b.effectDebounce||(h?function(t){const n=()=>{cancelAnimationFrame(e),clearTimeout(o),t()};let e,o;o=setTimeout(n,b.RAF_TIMEOUT),e=requestAnimationFrame(n)}:m);function Ut(){return[vt,Dt++]}function Pt(t,n){const e=Ut(),o=e[1],r=e[0]._hooksData;let i=r[o]||{};return bt(i.args,n)?(r[o]=null,i=gt(r,o,()=>({hookState:t()})),i.args=n,i.hookState):i.hookState}function wt(t,n){return Pt(()=>t,n)}function At(t){return Pt(()=>({current:t}),[])}function Ft(){const n=this._pendingEffects;for(const e in n||t)Vt(n[e]);this._pendingEffects=null}function Et(t,n){const e=Ut(),o=e[0],r=e[1],i=o._hooksData,s={};let c=i[r]||s;const l=o._pendingEffects=o._pendingEffects||s,u=l[r];if(!bt(c.args,n))return void(u&&(u.resolved=!0));c=gt(i,r,s),c.args=n;const a=u?xt(u)||u.cleanUp:null;var p;l[r]={cb:t,cleanUp:a},-1===Nt.indexOf(p=l)&&Nt.push(p),o.componentWillUnmount=Ft}function Tt(t,n,e){const o=Ut(),r=o[0],i=gt(r._hooksData,o[1],()=>({hookState:e?e(n):St(void 0,n)}));return i.args=t,[i.hookState,t=>{const n=i.args(i.hookState,t);i.hookState=n,r.setState({})}]}function Lt(t){return Tt(St,t)}y("hookSetup",function(t){vt=t,Dt=0,t&&(t._hooksData||(t._hooksData=[]))}),y("diffed",function(){kt(Ct)});export default G;export{_t as A,st as AsyncComponent,G as Component,c as Fragment,yt as Path,ft as Router,at as RouterSubscription,b as config,l as createElement,T as createRef,mt as createRoutePath,l as h,pt as loadURL,dt as redirect,ot as render,wt as useCallback,Et as useEffect,Pt as useMemo,Tt as useReducer,At as useRef,Lt as useState};
//# sourceMappingURL=ui-lib.modern.js.map
