function n(n,e,o){if(!(null==n||n instanceof Text||e===o)){null==n._listeners&&(n._listeners={}),null==e&&(e=a),null==o&&(o=a);for(const r in o)null==e[r]&&(delete n._listeners[r],n.removeEventListener(r,t));for(const r in e){const i=e[r],s=o[r];null!=i&&s!==i&&(null==s&&n.addEventListener(r,t),n._listeners[r]=i)}}}function t(n){return this._listeners[n.type].call(this,n)}const e={key:1,ref:1,children:1},o={value:1,checked:1};function r(n,t,e){e=e||"";const o=n.style;if("string"==typeof t)return void(o.cssText=t);const r="string"==typeof e;if(r)o.cssText="";else for(const n in e)null==t[n]&&(o[n]="");for(const n in t){const i=t[n];(r||i!==e[n])&&(o[n]=i)}}function i(n,t,e){const o=Array.isArray;o(t)&&(t=t.join(" ").trim()),o(e)&&(e=e.join(" ").trim()),t!==e&&u(n,"className",t)}function s(n,t,e){c(n,t,e,"_renders"),c(n,t,e,"_renderedBy")}const l={_dom:"_FragmentDomNodeChildren",_FragmentDomNodeChildren:"_dom"};function c(n,t,e,o){let r=n;const i=l[t];for(;r;)i&&(r[i]=null),r[t]=e,r=r[o]}function u(n,t,e){return t in n?n[t]=null==e?"":e:null==e?n.removeAttribute(t):n.setAttribute(t,e)}function p(n,t){null!=t&&c(n,"_parentDom",t,"_renderedBy")}const a={},d=[];function f(n,t,e){return function n(t,e,o,r){if(!t)return e;for(let i=0;i<t.length;i++){const s=t[i];Array.isArray(s)?n(s,e,o,r):r&&null==s||e.push(o?o(s):s)}return e}(n,[],t,e)}function m(n){return"o"===n[0]&&"n"===n[1]}const h=a.hasOwnProperty,_="assign"in Object?a.constructor.assign:function(n){for(let t=1;t<arguments.length;t++){const e=arguments[t];for(const t in e)h.call(e,t)&&(n[t]=e[t])}return n};function y(n,t){n&&("function"==typeof n?n(t):n.current=t)}function g(n,t,e){const o=n.ref,r=(t||a).ref;o&&o!==r&&(y(o,e),r&&y(t.ref,null))}const b={};function S(n,t,...e){if(null==n||"boolean"==typeof n)return null;null==t&&(t=a);const o=t.ref,r=t.key,i="string"==typeof n?{}:null;let s;return t=function(n,t){const e={},o=null!=t;for(const r in n)null==x[r]&&(e[r]=n[r],o&&m(r)&&(t[r.substr(2).toLowerCase()]=n[r]));return e}(t,i),e.length&&null==t.children&&(s=f(e)),null!=t.children&&(s=f([t.children])),t.children=s,D(n,t,i,r,o)}function D(n,t,e,o,r){const i={type:"string"==typeof n?n.toLowerCase():n,props:t,events:e,key:o,ref:r,_dom:null,_children:null,_component:null,_nextSibDomVNode:null,_renders:null,_renderedBy:null,_prevSibDomVNode:null,_FragmentDomNodeChildren:null,_parentDom:null,_depth:0,__self:null};return i.__self=i,i}const N=function(){},x={key:1,ref:1};function v(n){return null==n||"boolean"==typeof n?S(b):"string"==typeof n||"number"==typeof n?D(null,String(n)):Array.isArray(n)?S(N,null,n):null!=n._dom?D(n.type,n.props,n.events,n.key,null):n}function V(){return{current:null}}const C="undefined"!=typeof Promise,k="undefined"!=typeof requestAnimationFrame,P=setTimeout,U=C?Promise.prototype.then.bind(Promise.resolve()):P,w={deferImplementation:U,scheduleRender:k?function(n){return requestAnimationFrame(n)}:U,eagerlyHydrate:!0},A={hookSetup:N,diffed:N};function E(n,t){let e=A[n];e===N&&(e=null),A[n]=function(){e&&e.apply(0,arguments),t.apply(0,arguments)}}const F=[],B=[];function L(){O(F)}function R(){O(B)}function O(n){let t;for(;t=n.pop();)H(t)}function q(n){const t=n.name;return"componentDidMount"===t?F.push(n):"componentDidUpdate"===t?B.push(n):void H(n)}function H(n){const t=n.args,e=n.bind,o=n.name;e._lastLifeCycleMethod=o;const r=e[o],i=!!e.componentDidCatch;if(!r)return;const s=()=>r.apply(e,t);if(C)Promise.resolve().then(s).catch(n=>{if(i)return e.componentDidCatch(n);throw n});else try{s()}catch(n){if(i)return e.componentDidCatch(n);throw n}}function M(t,e){if(null==t||t===a)return;y(t.ref,null),M(t._renders,e);const o=t._component;let r;e||null==o||(o.setState=N,o.forceUpdate=N,o._VNode=null,q({name:"componentWillUnmount",bind:o}));const i=t._children;if(i)for(;i.length;)r=i.pop(),M(r,e);!function(t,e){if(!e&&"function"!=typeof t.type){const e=t._dom;null!=e&&(!(t.type===b)&&n(e,null,t.events),function(n){W(j,n)}(e),function(n){if(null==n)return;const t=n.parentNode;t&&t.removeChild(n)}(e))}!function(n,t){if(null!=n){if(!t){var e=n._nextSibDomVNode;if(null!=e){const n=e._dom,t=n&&n.previousSibling;s(e,"_prevSibDomVNode",t&&t._VNode)}const t=n._prevSibDomVNode;if(null!=t){const n=t._dom,e=n&&n.nextSibling;s(t,"_nextSibDomVNode",e&&e._VNode)}}W(T,n)}}(t,e)}(t,e)}const j={_VNode:1,_listeners:1,onclick:1},T={events:1,_FragmentDomNodeChildren:1,_children:1,_component:1,_depth:1,_dom:1,_nextSibDomVNode:1,_prevSibDomVNode:1,_renderedBy:1,_renders:1,_parentDom:1};function W(n,t){if(null!=t)for(const e in n)t[e]=null}function $(n,t,e,o){return function(n,t,e,o,r){const i=n.type===N,s=t.length,l=Math.max(s,e.length);for(let u=0;u<l;u++){const l=t[u]||(u<s?S(b):null),p=e[u]||a;if(null==p._nextSibDomVNode){const t=i?n._nextSibDomVNode:null;null!=t&&c(l,"_nextSibDomVNode",t,"_renderedBy")}nn(l,p,o,null,r),i&&null!=l&&I(n,l,u)}if(i&&s){const t=n._children;c(n,"_nextSibDomVNode",t[s-1]._nextSibDomVNode,"_renderedBy"),c(n,"_prevSibDomVNode",t[0]._prevSibDomVNode,"_renderedBy")}}(n,n._children||d,(t||a)._children||d,e,o)}function I(n,t,e){const o=t&&(t._dom||t._FragmentDomNodeChildren);let r=n._FragmentDomNodeChildren;null==r&&(r=[],c(n,"_FragmentDomNodeChildren",r,"_renderedBy")),r[e]=o}const K=[];class Q{constructor(n){this.state={},this.props=n}render(n,t){return null}setState(n){if(this._oldState=_({},this.state),this._nextState=_({},this.state),"function"==typeof n){const t=n(this._nextState,this.props);if(null==t)return;_(this._nextState,t)}else _(this._nextState,n);var t;this.state=this._nextState,(t=this)._dirty=!0,1===K.push(t)&&w.scheduleRender(z)}forceUpdate(n){if(null==this._VNode)return;const t=!1!==n;this.base=nn(this._VNode,_({},this._VNode),this._VNode._parentDom,t,{depth:this._depth}),"function"==typeof n&&n(),L(),R()}}function z(){let n;for(K.sort((n,t)=>n._depth-t._depth);n=K.pop();)n._dirty&&(n._dirty=!1,n.forceUpdate(!1))}const G=n=>"function"==typeof n&&n!==N,J={_nextSibDomVNode:1,_prevSibDomVNode:1};function X(n,t){if(t._renders=n,n){n._renderedBy=t;for(const e in J)n[e]=t[e]}}function Y(n){return this.constructor(n)}function Z(n,t,e){const o=_({},n.state||a,n._nextState||a),r=function(n,t,e){const o=n.getDerivedStateFromProps;return null!=o?_({},o(t,e)):null}(t,e.props,o);r&&_(o,r),n._nextState=o}function nn(t,l,c,d,h){if("boolean"==typeof t&&(t=null),null==l&&(l=a),null==t)return void M(l);if(t===a)return null;if(!((_=t)&&_.__self===_||(console.warn("component not of expected type =>",_),0)))return null;var _;if(l===t)return t._dom;!function(n,t){if(t===a||null==n||null==t)return;const e=t._prevSibDomVNode;null==n._prevSibDomVNode&&null!=e&&(s(n,"_prevSibDomVNode",e),s(e,"_nextSibDomVNode",n));const o=t._nextSibDomVNode;null==n._nextSibDomVNode&&null!=o&&(s(n,"_nextSibDomVNode",o),s(o,"_prevSibDomVNode",n))}(t,l);let y=l.type,S=t.type,D=G(S);S===y&&D&&(t._component=l._component),S!==y&&(M(l),l=a);const x=t;if("string"!=typeof t.props&&S!==b&&(t=function(n,t,e,o){let r;return null!=n&&G(r=n.type)?(t=t||a,function(n){const t=n.prototype;return!(!t||!t.render)}(r)?function(n,t,e,o){let r;const i=n.type;let s=n._component;if(null!=s){if(null!=s.shouldComponentUpdate&&!e&&!1===s.shouldComponentUpdate(n.props,s._nextState||s.state))return a;Z(s,i,n),q({bind:s,name:"componentWillUpdate",args:[n.props,s._nextState]}),r="componentDidUpdate"}else r="componentDidMount",s=new i(n.props),n._component=s,Z(s,i,n),q({bind:s,name:"componentWillMount"}),s._depth=++o.depth;s._VNode=n;const l=s._oldState,c=t.props;s.state=s._nextState,s._oldState=null,s._nextState=null,s.props=n.props;const u=v(s.render(s.props,s.state));return X(u,n),q({bind:s,name:r,args:"componentDidUpdate"===r?[c,l]:[]}),g(n,t,s),u}(n,t,e,o):function(n,t){let e;const o=n.type;let r;return n._component?r=n._component:(r=new Q(n.props),n._component=r,r.render=Y,r.constructor=o,r.props=n.props,r._depth=++t.depth),r._VNode=n,A.hookSetup(r),e=v(r.render(n.props)),A.hookSetup(null),X(e,n),e}(n,o)):n}(t,l,d,h)),G(l.type)&&(l=l._renders),t!==x)return nn(t,l,c,d,h);let V;return t._children=function(n){const t=n.props.children;return null==t&&n.type!==N?[]:f([t],v)}(t),y=l.type,S=t.type,p(t,c),S===N?$(t,l,c,h):(y!==S&&(l=null),function(t,l,c){const d=(l=l||a)===a;let f;const h=l._dom;f=t.type!==l.type||null==h?function(n){if("string"==typeof n.props)return document.createTextNode("");{const t=n.type;return t===b?document.createComment("$"):document.createElement(t)}}(t):h,f._VNode=t,function(t,s,l){if(s.type===b)return;if(l=l||a,"string"==typeof s.props)return function(n,t,e){return t===e||(n.nodeValue=t)}(t,s.props,l.props);const c=l.props||a,p=s.props;null!=c&&function(n,t,o){for(const r in t)m(r)||r in e||null==o[r]&&u(n,r,null)}(t,c,p),function(n,t,s){for(let l in s){if(m(l)||l in e)continue;let c=s[l],p=o[l]?n[l]:t[l];c!==p&&(l="class"===l?"className":l,"className"!==l?"style"!==l?u(n,l,c):r(n,c,p):i(n,c,p))}}(t,c,p),n(t,s.events,l.events)}(f,t,d?null:l),s(t,"_dom",f),function n(t,e){t&&(null!=t._component?t._component.base=e:n(t._renderedBy,e))}(t,f),d&&function(n,t,e){const o=function(n){if(!n)return;const t=n._dom;if(t)return t;const e=n._FragmentDomNodeChildren;return e?function n(t){for(let e=0;e<t.length;e++){const o=t[e];if(Array.isArray(o)){const t=n(o);if(t)return t}else if(o)return o}}(e):void 0}(n._nextSibDomVNode),r=n._dom;r&&(function(n,t,e){let o,r=!0;t&&t!==n&&(r=!1,o=t),!r&&o?e.insertBefore(n,o):e.appendChild(n)}(r,o,t),function(n){const t=n._dom;null==n._parentDom&&p(n,t.parentNode);let e=n._nextSibDomVNode;if(null==e){const n=t.nextSibling;null!=n&&(e=n._VNode)}s(e,"_prevSibDomVNode",n),s(n,"_nextSibDomVNode",e);let o=n._prevSibDomVNode;if(null==o){const n=t.previousSibling;null!=n&&(o=n._VNode)}s(o,"_nextSibDomVNode",n),s(n,"_prevSibDomVNode",o)}(n))}(t,c)}(t,l,c),V=t._dom,$(t,l,V,h)),A.diffed(t),g(t,l,V),V}function tn(n,t){const e=S(N,null,n);t.hasChildNodes()&&function(n){let t;for(;t=n.firstChild;)n.removeChild(t)}(t),nn(e,null,t,!1,{depth:0}),L(),R()}const en=["boolean","string","number"];function on(n,t){return null==n||en.indexOf(typeof n)>-1||n.__self?n:S(n,t)}class rn extends Q{componentDidMount(){this._init()}componentDidUpdate(n){(n&&(n.promise||n.componentPromise))!==(this.props.promise||this.props.componentPromise)&&this._init()}_init(){this.setState({inProgress:!0}),(this.props.promise||this.props.componentPromise)().then(n=>{this.setState({render:n,inProgress:!1})}).catch(n=>this.setState({error:!0,inProgress:!1}))}render(n,t){return t.inProgress?on(n.fallback||n.fallbackComponent)||"Loading":t.error?on(n.errorComponent)||"An Error Occured":on(t.render,function(n,t){t=f([t]);const e={};for(const o in n)-1===t.indexOf(o)&&(e[o]=n[o]);return e}(n,["fallback","fallbackComponent","promise","componentPromise"]))}}function sn(n,t,e,o){return function(){return cn(t,"()' has been deprecated"+(e?" Use '"+e+"()' instead":"")),n.apply(o,d.slice.call(arguments))}}function ln(n,t,e){const o=Object.getOwnPropertyDescriptor(n,e).get.bind(n);Object.defineProperty(n,t,{get:sn(o,t,e)})}function cn(){const n=["[DeprecationWarning]"].concat(d.slice.call(arguments));console.warn.apply(console,n)}const un=/\/+$/;function pn(n){return 1===n.length?n:n.replace(un,"")}const an=[],dn={subscribe(n){an.includes(n)||an.push(n)},unsubscribe(n){for(let t=0;t<an.length;t++)if(an[t]===n)return an.splice(t,1)},emit(n,t){for(const e of an)e(n,t)},unsubscribeAll(){an.length=0}};function fn(n){window.history.pushState(null,"",n),dn.emit(n,{type:"load",native:!1})}function mn(n){window.history.replaceState(null,"",n),dn.emit(n,{type:"redirect",native:!1})}class hn extends Q{constructor(n){super(n),this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this)}static __emitter(){dn.emit(hn.path+hn.qs,{type:"popstate",native:!0})}static get path(){return location.pathname}static get qs(){return location.search}static get searchParams(){return new URLSearchParams(hn.qs)}static _getParams(n,t){const e={};for(const o in n)e[n[o]]=decodeURIComponent(t[o]);return e}static getCurrentParams(n){const t=(n=_n(n)).params,e=n.regex.exec(hn.path);return e?hn._getParams(t,e):{}}componentDidMount(){dn.subscribe(this._routeChangeHandler),window.addEventListener("popstate",hn.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",hn.__emitter),dn.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return S("div",null,`The Requested URL "${hn.path}" was not found`)}_routeChangeHandler(n){const t=pn(hn.path);let e=[];this.props.children.forEach(n=>{const o=_n(n.props.match),r=o.regex.exec(t);if(r){const t=n.props,i=hn._getParams(o.params,r);e.push(on(t.component,_({},n.props,{params:i})))}}),e.length||(e=S(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:e})}render(n,t){return S(N,null,t.child)}}function _n(n){if(null!=n.regex)return n;n=pn(n);const t={};let e=0;return{regex:(o=n.split("/").map(n=>":"===n[0]?(t[++e]=n.substr(1),"([^?\\/]+)"):n).join("/"),RegExp(`^${o}(/?)$`)),params:t};var o}ln(hn,"getPath","path"),ln(hn,"getQs","qs");const yn=sn(_n,"absolutePath","createRoutePath");function gn(n){if(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)return;n.stopImmediatePropagation&&n.stopImmediatePropagation(),n.stopPropagation&&n.stopPropagation(),n.preventDefault();const t=new URL(this.href,location.href);fn(t.pathname+t.search+t.hash)}function bn(n){return null!=n.href&&(n.onClick=gn),S("a",n)}const Sn={};function Dn(n,t){return!n||t.some((t,e)=>t!==n[e])}function Nn(n,t,e){return n[t]||(n[t]=e())}function xn(n,t){return"function"==typeof t?t(n):t}let vn=0,Vn=null;const Cn=[];function kn(n){const t=n.cleanUp;"function"==typeof t&&(t(),n.cleanUp=null)}function Pn(n){kn(n);let t=n.cb;t&&"function"==typeof(t=t())&&(n.cleanUp=t),n.cb=null}function Un(){Cn.forEach(n=>{const t=n._pendingEffects;for(const n in t)Pn(t[n])}),Cn.length=0}function wn(){return[Vn,vn++]}function An(n,t){const e=wn(),o=e[1],r=e[0]._hooksData;let i=r[o]||{};return Dn(i.args,t)?(r[o]=null,i=Nn(r,o,()=>({hookState:n()})),i.args=t,i.hookState):i.hookState}function En(n,t){return An(()=>n,t)}function Fn(n){return An(()=>({current:n}),[])}function Bn(){const n=this._pendingEffects;for(const t in n||a)kn(n[t]);this._pendingEffects=null}function Ln(n,t){const e={hookState:n},o=wn(),r=o[0],i=o[1],s=r._hooksData;let l=s[i]||{};if(!Dn(l.args,t))return;l=Nn(s,i,()=>e),l.args=t;const c=r._pendingEffects=r._pendingEffects||{},u=c[i]||{};Pn(u),c[i]={cb:n,cleanUp:u.cleanUp},Cn.push(r),r.componentWillUnmount=Bn}function Rn(n,t,e){const o=wn(),r=o[0],i=Nn(r._hooksData,o[1],()=>({hookState:e?e(t):xn(void 0,t)}));return i.args=n,[i.hookState,n=>{const t=i.args(i.hookState,n);i.hookState=t,r.setState({})}]}function On(n){return Rn(xn,n)}E("hookSetup",function(n){Vn=n,vn=0,n&&(n._hooksData||(n._hooksData=[]))}),E("diffed",function(){w.scheduleRender(Un)});export default Q;export{bn as A,rn as AsyncComponent,Q as Component,N as Fragment,Sn as Path,hn as Router,dn as RouterSubscription,yn as absolutePath,w as config,S as createElement,V as createRef,_n as createRoutePath,S as h,fn as loadURL,mn as redirect,tn as render,En as useCallback,Ln as useEffect,An as useMemo,Rn as useReducer,Fn as useRef,On as useState};
//# sourceMappingURL=ui-lib.modern.js.map
