const t={},e=[],n=/^aria[\-A-Z]/,o=/^xlink:?/,r={},s=function(){};function i(t,e){return function t(e,n,o){if(!e)return n;for(let r=0;r<e.length;r++){const s=e[r];Array.isArray(s)?t(s,n,o):n.push(o?o(s):s)}return n}(t,[],e)}const c=t.hasOwnProperty,u=t.constructor.assign||function(t){for(let e=1;e<arguments.length;e++){const n=arguments[e];for(const e in n)c.call(n,e)&&(t[e]=n[e])}return t},l=(t,e)=>{let n,o={};for(n in t)-1===e.indexOf(n)&&(o[n]=t[n]);return o};function a(t,e){-1===t.indexOf(e)&&t.push(e)}const p="undefined"!=typeof Promise,f=p?Promise.prototype.then.bind(Promise.resolve()):t=>setTimeout(t),d="function"==typeof requestAnimationFrame,h={createElement:s,hookSetup:s,diffStart:s,diffEnd:s,lifeCycle:s,domNodeCreated:s,componentInstance:s};function m(t){for(const e in t){const n=t[e];if(!n)throw new Error("invalid callback: "+n);let o=h[e];h[e]=function(){o.apply(0,arguments),n.apply(0,arguments)}}}const _={scheduleRender:d?t=>requestAnimationFrame(t):f,warnOnUnmountRender:!1,RAF_TIMEOUT:100,debounceEffect:null,inMemoryRouter:!1,memoryRouteStore:localStorage},y=["key","ref"];function g(n,o){if(null==n||"boolean"==typeof n)return null;let r;null==o&&(o=t);const s=o.ref,c=o.key;let u;null!=(o=l(o,y)).children?u=i([o.children]):(r=e.slice.call(arguments,2)).length&&(u=i(r)),o.children=u;const a=v(n,o,c,s);return h.createElement(a),a}function b(t){return null==t||"boolean"==typeof t?g(r):"string"==typeof t||"number"==typeof t?v(null,String(t)):Array.isArray(t)?g(s,null,t):t._used?v(t.type,t.props,t.key):(t._used=!0,t)}function v(t,e,n,o){return{type:t,props:e,key:n,ref:o,_dom:null,_children:null,_component:null,_renders:null,_parentDom:null,_used:!1,constructor:void 0}}const S={value:1,checked:1},k={key:1,ref:1,children:1};function x(t,e,n){n=n||"";const o=t.style;if("string"==typeof(e=e||""))return void(o.cssText=e);const r="string"==typeof n;if(r)o.cssText="";else for(const t in n)null==e[t]&&(o[t]="");for(const t in e){const s=e[t];(r||s!==n[t])&&(o[t]=s)}}const w=t=>t.trim();function C(t,e,n,o){const r=Array.isArray;r(e)&&(e=w(e.join(" "))),r(n)&&(n=w(n.join(" "))),e!==n&&o.batch.push({node:t,action:1,attr:o.isSvg?"class":"className",value:e})}function U(t,e,o,r){if("o"===e[0]&&"n"===e[1])return function(t,e,n){e=e.substr(2).toLowerCase();const o=t._events;null==n?(t.removeEventListener(e,E),delete o[e]):(o[e]||t.addEventListener(e,E),o[e]=n)}(t,e,o);const s=null==o||!1===o&&!n.test(e);return!r&&e in t?t[e]=s?"":o:s?t.removeAttribute(e):t.setAttribute(e,o)}function E(t){return this._events[t.type].call(this,t)}function R(t){if(null==t)return;const e=t.parentNode;e&&e.removeChild(t)}function D(t,e){!function(t){A(N,t)}(e),function(t){A(P,t)}(t)}const N={_VNode:1,_events:1},P={_children:1,_component:1,_dom:1,_renders:1,_parentDom:1,_used:1,key:1,ref:1};function A(t,e){if(null!=e)for(const n in t)e[n]=null}const V=[],M=[];function T(t){let e;for(;e=t.pop();)I(e)}function O(t){const e=t.name;return"componentDidMount"===e?V.push(t):"componentDidUpdate"===e?M.push(t):void I(t)}function I(t){const e=t.name,n=t.bind,o=n[e];if(h.lifeCycle(e,n),n._lastLifeCycleMethod=e,!o)return;const r=t.args,s="function"==typeof n.componentDidCatch,i=()=>o.apply(n,r);if(p)f(i).catch(t=>{if(!s)throw t;n.componentDidCatch(t)});else try{i()}catch(t){if(s)return n.componentDidCatch(t);throw t}}function L(t){!function(t){const e=t.length;for(let n=0;n<e;n++){const e=t[n],r=e.node,s=e.refDom,i=e.value,c=e.VNode;let u=e.attr;switch(e.action){case 4:i.insertBefore(r,s);break;case 1:U(r,u,i);break;case 3:x(r,i.newValue,i.oldValue);break;case 2:R(r),D(c,r);break;case 7:D(c,r);break;case 6:r.removeAttributeNS("http://www.w3.org/1999/xlink",u);break;case 5:u!==(u=u.replace(o,""))?r.setAttributeNS("http://www.w3.org/1999/xlink",u.toLowerCase(),i):U(r,u,i,!0)}}}(t),h.diffEnd(),T(V),T(M)}const F=[];class q{constructor(t){this.state={},this.props=t,h.componentInstance(this,t)}render(t,e){return null}setState(t){if(this._oldState=u({},this.state),this._nextState=u({},this._nextState||this.state),"function"==typeof t){const e=t(this._nextState,this.props);if(null==e)return;u(this._nextState,e)}else u(this._nextState,t);var e;(e=this)._dirty=!0,1===F.push(e)&&_.scheduleRender(H)}forceUpdate(t){if(null==this._VNode)return;const e=[],n=!1!==t;h.diffStart(this,n),Q(this._VNode,u({},this._VNode),this._VNode._parentDom,n,{depth:this._depth,batch:e,isSvg:!1}),"function"==typeof t&&t(),L(e)}}function H(){let t;for(F.sort((t,e)=>t._depth-e._depth);t=F.pop();)t._dirty&&(t._dirty=!1,t.forceUpdate(!1))}function W(t,e){t&&("function"==typeof t?t(e):t.current=e)}function $(e,n,o){const r=e.ref,s=(n||t).ref;r&&r!==s&&(W(r,o),s&&W(n.ref,null))}function j(){return{current:null}}const K=t=>"function"==typeof t&&t!==s;function B(t){return this.constructor(t)}function G(n,o,i,c){if(n.type===r)return;const l=n._children||e,a=(o||t)._children||e;return l!==a?function(e,n,o,i,c){const l=e.type===s,a=n.length,p=o.length,f=Math.max(a,p),d=l?c.next||(Z(o[p-1])||t).nextSibling:null;for(let e=0;e<f;e++){const s=n[e]||(e<a?g(r):null);let l=o[e]||t,p=(Z(l)||t).nextSibling||d;Q(s,l,i,!1,u({},c,{next:p}))}}(n,l,a,i,c):void 0}function Z(n){if(n&&n!==t){for(;K(n.type);)n=n._renders;if(n.type===s){const t=n._children||e;return Z(t[t.length-1])}return n._dom}}function z(){_.warnOnUnmountRender&&console.warn("Component state changed after unmount",this)}function J(e,n,o){if(null==e||e===t)return;o=e.type===s||"string"==typeof e.props?-1:o||0,W(e.ref,null),J(e._renders,n,o);const r=e._component;null!=r&&(r.setState=z,r.forceUpdate=z,r._VNode=null,O({name:"componentWillUnmount",bind:r}));const i=e._children;if(function(t,e,n){let o;!function(t){return"function"!=typeof t.type}(t)?e.batch.push({action:7,VNode:t,node:o}):(o=t._dom,null!=o&&(function(t,e,n){const o=t.props;for(const t in o)"o"===t[0]&&"n"===t[1]&&n.batch.push({action:1,node:e,attr:t})}(t,o,e),e.batch.push({node:o,action:n>0?7:2,VNode:t})))}(e,n,o),i){const t=i.length;for(let e=0;e<t;e++)J(i[e],n,o+1);i.length=0}}function Q(e,n,c,l,a){if(null==e||"boolean"==typeof e)return void J(n,a);if(!((p=e)&&void 0===p.constructor||(console.warn("component not of expected type =>",p),0)))return null;var p;if(n===e)return e._dom;let f=(n=n||t).type,d=e.type,m=K(d);if(d===f&&m&&(e._component=n._component),e._parentDom=c,e._used=!0,d!==f){if(!a.next){const e=Z(n);a.next=(e||t).nextSibling}J(n,a),n=t}const _=e;if("string"!=typeof e.props&&d!==r&&(e=function(e,n,o,r){let s;if(null!=e&&K(s=e.type)){let i;return n=n||t,i=function(t){const e=t.prototype;return!(!e||!e.render)}(s)?function(e,n,o,r){let s;const i=e.type;let c=e._component;const l=null!=c;if(l){if(s="componentDidUpdate",null!=c.shouldComponentUpdate&&!o&&!1===c.shouldComponentUpdate(e.props,c._nextState||c.state))return t}else s="componentDidMount",c=new i(e.props),e._component=c,c._depth=++r.depth;c._VNode=e;const a=c._oldState,p=n.props;O({bind:c,name:l?"componentWillUpdate":"componentWillMount",args:l?[e.props,c._nextState]:null}),c.state=function(e,n,o){const r=u({},e.state||t,e._nextState||t),s=function(t,e,n){const o=t.getDerivedStateFromProps;return null!=o?u({},o(e,n)):null}(n,o.props,r);return s&&u(r,s),r}(c,i,e),c._oldState=null,c._nextState=null,c.props=e.props;const f=b(c.render(c.props,c.state));return O({bind:c,name:s,args:"componentDidUpdate"===s?[p,a]:[]}),$(e,n,c),f}(e,n,o,r):function(t,e){let n;const o=t.type;let r;return t._component?r=t._component:(r=new q(t.props),t._component=r,r.render=B,r.constructor=o,r.props=t.props,r._depth=++e.depth),r._VNode=t,h.hookSetup(r),n=b(r.render(t.props)),h.hookSetup(null),n}(e,r),e._renders=i,i}return e}(e,n,l,a),a.isSvg="svg"===e.type||a.isSvg),K(n.type)&&(n=n._renders),e!==_){if(e===t)return;return Q(e,n,c,l,a)}let y;return e._children=function(t){let e=t.props.children;if(t.type!==s){if(null==e)return[]}else e&&!e.length&&(e=null);return i([e],b)}(e),f=n.type,d=e.type,f!==d&&(n=null),d===s?G(e,n,c,a):(function(e,n,s,i){const c=(n=n||t)===t;let u;const l=n._dom;u=e.type!==n.type||null==l?function(t,e){if("string"==typeof t.props)return document.createTextNode("");{const n=t.type;if(n===r)return document.createComment("$");let o;return o=e.isSvg?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n),o._events={},h.domNodeCreated(o,t),o}}(e,i):l,u._VNode=e,e._dom=u,function(e,n,s,i){if(n.type===r)return;if(s=s||t,"string"==typeof n.props)return function(t,e,n){return e===n||(t.nodeValue=e)}(e,n.props,s.props);const c=s.props,u=n.props;null!=c&&function(t,e,n,r){for(let s in e)if(!k[s]&&null==n[s]&&null!=e[s]){const e=s===(s=s.replace(o,""))?1:6;r.batch.push({node:t,action:e,attr:s})}}(e,c,u,i),function(t,e,n,o){for(let r in n){if(r in k)continue;let s=n[r],i=S[r]?t[r]:e[r];s!==i&&(r="class"===r?"className":r,"className"!==r?o.batch.push("style"!==r?{node:t,action:o.isSvg?5:1,attr:r,value:s}:{node:t,action:3,value:{newValue:s,oldValue:i}}):C(t,s,i,o))}}(e,c||t,u,i)}(u,e,c?null:n,i),c&&i.batch.push({node:u,action:4,refDom:i.next,value:s,VNode:e})}(e,n,c,a),y=e._dom,a.isSvg="foreignObject"!=d&&a.isSvg,G(e,n,y,a),$(e,n,y)),y}function X(t,e){const n=g(s,void 0,[t]);e.hasChildNodes()&&function(t){let e;for(;e=t.firstChild;)t.removeChild(e)}(e);const o=[];Q(n,void 0,e,!1,{depth:0,batch:o,isSvg:void 0!==e.ownerSVGElement}),L(o)}const Y=["boolean","string","number"];function tt(t,n){return null==t||Y.indexOf(typeof t)>-1?t:void 0===t.constructor?function(t){const n=(t=function(t,n){if(!t)return null;n=u({},t.props,n),arguments.length>2&&(n.children=e.slice.call(arguments,2));let o=l(n,y);return v(t.type,o,n.key||t.key,n.ref||t.ref)}(t)).props.children;return n&&(t.props.children=i([n],tt)),t}(t):g(t,n)}class et extends q{componentDidMount(){this._init()}componentDidUpdate(t){(t&&(t.promise||t.componentPromise))!==(this.props.promise||this.props.componentPromise)&&this._init()}_init(){this.setState({inProgress:!0}),(this.props.promise||this.props.componentPromise)().then(t=>{this.setState({render:t,inProgress:!1,error:!1})}).catch(t=>this.setState({error:!0,inProgress:!1}))}render(t,e){return e.inProgress?tt(t.fallback||t.fallbackComponent)||"Loading":e.error?tt(t.errorComponent)||"An Error Occured":tt(e.render,l(t,["fallback","fallbackComponent","promise","componentPromise"]))}}const nt=/\/+$/;function ot(t){return 1===t.length?t:t.replace(nt,"")}const rt=[],st={subscribe(t){a(rt,t)},unsubscribe(t){rt.splice(rt.indexOf(t),1)},emit(t,e){rt.forEach(n=>n(t,e))},unsubscribeAll(){rt.length=0}};function it(t,e){if(!_.inMemoryRouter)return window.history[e](null,"",t);_.memoryRouteStore.setItem("UI--ROUTE",t)}function ct(t){it(t,"pushState"),st.emit(t,{type:"load",native:!1})}function ut(t){it(t,"replaceState"),st.emit(t,{type:"redirect",native:!1})}class lt extends q{constructor(t){super(t),this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this),this.componentDidUpdate=this._setRouteMethod}_setRouteMethod(){_.inMemoryRouter=!!this.props.inMemoryRouter}static __emitter(){st.emit(lt.path+lt.qs,{type:"popstate",native:!0})}static get path(){return location.pathname}static get qs(){return location.search}static get searchParams(){return new URLSearchParams(lt.qs)}static _getParams(t,e){const n={};for(const o in t)n[t[o]]=decodeURIComponent(e[o]);return n}static getCurrentParams(t){const e=(t=at(t)).params,n=t.regex.exec(lt.path);return n?lt._getParams(e,n):{}}componentDidMount(){this._setRouteMethod(),st.subscribe(this._routeChangeHandler),window.addEventListener("popstate",lt.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",lt.__emitter),st.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return g("div",null,`The Requested URL "${lt.path}" was not found`)}_routeChangeHandler(t){const e=ot(_.inMemoryRouter?_.memoryRouteStore.getItem("UI--ROUTE")||this.props.defaultRoute||"/":lt.path);let n=[];this.props.children.forEach(t=>{const o=at(t.props.match),r=o.regex.exec(e);if(r){const e=t.props,s=lt._getParams(o.params,r);n.push(tt(e.component,u({},t.props,{params:s})))}}),n.length||(n=g(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:n})}render(t,e){return g(s,null,e.child)}}function at(t){if(!t)throw Error("Invalid value for match: "+t);if(null!=t.regex)return t;t=ot(t);const e={};let n=0;return{regex:(o=t.split("/").map(t=>":"===t[0]?(e[++n]=t.substr(1),"([^?\\/]+)"):t).join("/"),RegExp(`^${o}(/?)$`)),params:e};var o}function pt(t){if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault();const e=new URL(this.href,location.href);ct(e.pathname+e.search+e.hash)}function ft(t,e,n){return t.call(n,e)}class dt extends q{constructor(t){super(t),this._onClick=t=>{const e=t.currentTarget;ft(pt,t,e);const n=this.props.onClick;n&&ft(n,t,e)}}render(t){return g("a",u({},t,{onClick:this._onClick}))}}const ht={};function mt(t,e){return!t||e.some((e,n)=>e!==t[n])}function _t(t,e,n){return t[e]||(t[e]=yt(0,n))}function yt(t,e){return"function"==typeof e?e(t):e}let gt=0,bt=null;const vt=[];function St(t){const e=t.cleanUp;"function"==typeof e&&(e(),t.cleanUp=null)}function kt(t){let e=t.cb;e&&"function"==typeof(e=e())&&(t.cleanUp=e),t.cb=null}function xt(){vt.forEach(t=>{for(const n in t)(e=t[n]).resolved||St(e),kt(e);var e}),vt.length=0}const wt=_.debounceEffect||(d?function(t){const e=()=>{cancelAnimationFrame(n),clearTimeout(o),t()};let n,o;o=setTimeout(e,_.RAF_TIMEOUT),n=requestAnimationFrame(e)}:f);function Ct(){return[bt,gt++]}function Ut(t,e){const n=Ct(),o=n[1],r=n[0]._hooksData;let s=r[o]||{};return mt(s.args,e)?(r[o]=null,s=_t(r,o,()=>({hookState:t()})),s.args=e,s.hookState):s.hookState}function Et(t,e){return Ut(()=>t,e)}function Rt(t){return Ut(()=>({current:t}),[])}function Dt(){const e=this._pendingEffects;for(const n in e||t)St(e[n]);this._pendingEffects=null}function Nt(t,e){const n=Ct(),o=n[0],r=n[1],s=o._hooksData;let i=s[r]||{};const c=o._pendingEffects=o._pendingEffects||{},u=c[r];if(!mt(i.args,e))return void(u&&(u.resolved=!0));s[r]=i,i.args=e;const l=u?kt(u)||u.cleanUp:null;c[r]={cb:t,cleanUp:l},a(vt,c),o.componentWillUnmount=Dt}m({hookSetup:function(t){bt=t,gt=0,t&&(t._hooksData||(t._hooksData=[]))},diffEnd:function(){wt(xt)}});const Pt={};function At(t,e,n){const o=Ct(),r=o[0],s=_t(r._hooksData,o[1],()=>({hookState:n?n(e):yt(null,e)}));return[s.hookState,s.args||(s.args=e=>{const n=t(s.hookState,e);s.hookState=n,r.setState(Pt)})]}function Vt(t){return At(yt,t)}export default q;export{dt as A,et as AsyncComponent,q as Component,s as Fragment,ht as Path,lt as Router,st as RouterSubscription,m as addPluginCallback,_ as config,g as createElement,j as createRef,at as createRoutePath,g as h,ct as loadURL,ut as redirect,X as render,Et as useCallback,Nt as useEffect,Ut as useMemo,At as useReducer,Rt as useRef,Vt as useState};
//# sourceMappingURL=ui-lib.modern.js.map
