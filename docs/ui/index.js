function e(e,t,r){if(!(null==e||e instanceof Text||t===r)){for(var o in null==e._listeners&&(e._listeners={}),null==t&&(t=d),null==r&&(r=d),r)null==t[o]&&(delete e._listeners[o],e.removeEventListener(o,n));for(var i in t){var l=t[i],a=r[i];null!=l&&a!==l&&(null==a&&e.addEventListener(i,n),e._listeners[i]=l)}}}function n(e){return this._listeners[e.type].call(this,e)}var t={key:1,ref:1,children:1},r={value:1,checked:1};function o(e,n,t){t=t||"";var r=e.style;if("string"!=typeof n){var o="string"==typeof t;if(o)r.cssText="";else for(var i in t)null==n[i]&&(r[i]="");for(var l in n){var a=n[l];(o||a!==t[l])&&(r[l]=a)}}else r.cssText=n}function i(e,n,t){var r=Array.isArray;r(n)&&(n=n.join(" ").trim()),r(t)&&(t=t.join(" ").trim()),n!==t&&u(e,"className",n)}function l(e,n,t){s(e,n,t,"_renders"),s(e,n,t,"_renderedBy")}var a={_dom:"_FragmentDomNodeChildren",_FragmentDomNodeChildren:"_dom"};function s(e,n,t,r){for(var o=e,i=a[n];o;)i&&(o[i]=null),o[n]=t,o=o[r]}function u(e,n,t){return n in e?e[n]=null==t?"":t:null==t?e.removeAttribute(n):e.setAttribute(n,t)}function p(e,n){null!=n&&s(e,"_parentDom",n,"_renderedBy")}var d={},c=[];function f(e,n,t){return function e(n,t,r,o){if(!n)return t;for(var i=0;i<n.length;i++){var l=n[i];Array.isArray(l)?e(l,t,r,o):o&&null==l||t.push(r?r(l):l)}return t}(e,[],n,t)}function m(e){return"o"===e[0]&&"n"===e[1]}var _=d.hasOwnProperty,h="assign"in Object?d.constructor.assign:function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)_.call(t,r)&&(e[r]=t[r])}return e},v=Object.freeze({});function y(e,n){if(null==e||"boolean"==typeof e)return null;null==n&&(n=d);var t,r=n.ref,o=n.key,i="string"==typeof e?{}:null;n=D(n,i);for(var l=arguments.length,a=new Array(l>2?l-2:0),s=2;s<l;s++)a[s-2]=arguments[s];return a.length&&null==n.children&&(t=f(a)),null!=n.children&&(t=f([n.children])),n.children=t,b(e,n,i,o,r)}function b(e,n,t,r,o){var i={type:"string"==typeof e?e.toLowerCase():e,props:n,events:t,key:r,ref:o,_dom:null,_children:null,_component:null,_nextSibDomVNode:null,_renders:null,_renderedBy:null,_prevSibDomVNode:null,_FragmentDomNodeChildren:null,_parentDom:null,_depth:0,__self:null};return i.__self=i,i}var g=function(){},S={key:1,ref:1};function D(e,n){var t={},r=null!=n;for(var o in e)null==S[o]&&(t[o]=e[o],r&&m(o)&&(n[o.substr(2).toLowerCase()]=e[o]));return t}function N(e){return null==e||"boolean"==typeof e?y(v):"string"==typeof e||"number"==typeof e?b(null,String(e)):Array.isArray(e)?y(g,null,e):null!=e._dom?b(e.type,e.props,e.events,e.key,null):e}var x="undefined"!=typeof Promise,V="undefined"!=typeof requestAnimationFrame,C=setTimeout,P=x?Promise.prototype.then.bind(Promise.resolve()):C,w={deferImplementation:P,scheduleRender:V?function(e){return requestAnimationFrame(e)}:P,eagerlyHydrate:!0,beforeHookRender:null},U=[],A=[];function k(){B(U)}function F(){B(A)}function B(e){for(var n;n=e.pop();)O(n)}function L(e){var n=e.name;return"componentDidMount"===n?U.push(e):"componentDidUpdate"===n?A.push(e):void O(e)}function O(e){var n=e.args,t=e.bind,r=e.name;t._lastLifeCycleMethod=r;var o=t[r],i=!!t.componentDidCatch;if(x)Promise.resolve().then(()=>o&&o.apply(t,n)).catch(e=>{if(i)return t.componentDidCatch(e);throw e});else try{o.apply(t,n)}catch(e){if(i)return t.componentDidCatch(e);throw e}}function j(n,t){if(null!=n&&n!==d){j(n._renders,t);var r=n._component;t||null==r||(r.setState=g,r._VNode=null,L({name:"componentWillUnmount",bind:r}));var o=n._children;if(o)for(;o.length;)j(o.pop(),t);!function(n,t){if(!t&&"function"!=typeof n.type){var r=n._dom;null!=r&&(!(n.type===v)&&e(r,null,n.events),function(e){H(R,e)}(r),function(e){if(null!=e){var n=e.parentNode;n&&n.removeChild(e)}}(r))}!function(e,n){if(null!=e){if(!n){var t=e._nextSibDomVNode;if(null!=t){var r=t._dom,o=r&&r.previousSibling;l(t,"_prevSibDomVNode",o&&o._VNode)}var i=e._prevSibDomVNode;if(null!=i){var a=i._dom,s=a&&a.nextSibling;l(i,"_nextSibDomVNode",s&&s._VNode)}}H(E,e)}}(n,t)}(n,t)}}var R={_VNode:1,_listeners:1,onclick:1},E={events:1,_FragmentDomNodeChildren:1,_children:1,_component:1,_depth:1,_dom:1,_nextSibDomVNode:1,_prevSibDomVNode:1,_renderedBy:1,_renders:1,_parentDom:1};function H(e,n){if(null!=n)for(var t in e)n[t]=null}function M(e,n,t,r){return function(e,n,t,r,o){for(var i=e.type===g,l=n.length,a=Math.max(l,t.length),u=0;u<a;u++){var p=n[u]||(u<l?y(v):null),c=t[u]||d;if(null==c._nextSibDomVNode){var f=i?e._nextSibDomVNode:null;null!=f&&s(p,"_nextSibDomVNode",f,"_renderedBy")}Q(p,c,r,null,o),i&&null!=p&&q(e,p,u)}if(i&&l){var m=e._children;s(e,"_nextSibDomVNode",m[l-1]._nextSibDomVNode,"_renderedBy"),s(e,"_prevSibDomVNode",m[0]._prevSibDomVNode,"_renderedBy")}}(e,e._children||c,(n||d)._children||c,t,r)}function q(e,n,t){var r=n&&(n._dom||n._FragmentDomNodeChildren),o=e._FragmentDomNodeChildren;null==o&&s(e,"_FragmentDomNodeChildren",o=[],"_renderedBy"),o[t]=r}var T=[];class W{constructor(e){this.state={},this.props=e}render(e,n){return null}setState(e){if(this._oldState=h({},this.state),this._nextState=h({},this.state),"function"==typeof e){var n=e(this._nextState,this.props);if(null==n)return;h(this._nextState,n)}else h(this._nextState,e);var t;this.state=this._nextState,(t=this)._dirty=!0,1===T.push(t)&&w.scheduleRender(K)}forceUpdate(e){var n=!1!==e;this.base=Q(this._VNode,h({},this._VNode),this._VNode._parentDom,n,{depth:this._depth}),"function"==typeof e&&e(),k(),F()}}function K(){var e;for(T.sort((e,n)=>e._depth-n._depth);e=T.pop();)e._dirty&&(e._dirty=!1,e.forceUpdate(!1))}var I=e=>"function"==typeof e&&e!==g,$={_nextSibDomVNode:1,_prevSibDomVNode:1};function z(e,n){if(n._renders=e,e)for(var t in e._renderedBy=n,$)e[t]=n[t]}function G(e){return this.constructor(e)}function J(e,n,t){var r,o=h({},e.state||d,e._nextState||d),i=null!=(r=n.getDerivedStateFromProps)?h({},r(t.props,o)):null;i&&h(o,i),e._nextState=o}function Q(n,a,s,c,_){if("boolean"==typeof n&&(n=null),null==a&&(a=d),null!=n){if(n===d)return null;if(!((h=n)&&h.__self===h||(console.warn("component not of expected type =>",h),0)))return null;var h;if(a===n)return n._dom;!function(e,n){if(n!==d&&null!=e&&null!=n){var t=n._prevSibDomVNode;null==e._prevSibDomVNode&&null!=t&&(l(e,"_prevSibDomVNode",t),l(t,"_nextSibDomVNode",e));var r=n._nextSibDomVNode;null==e._nextSibDomVNode&&null!=r&&(l(e,"_nextSibDomVNode",r),l(r,"_prevSibDomVNode",e))}}(n,a);var y=a.type,b=n.type,S=I(b);b===y&&S&&(n._component=a._component),b!==y&&(j(a),a=d);var D,x,V=n;return"string"!=typeof n.props&&b!==v&&(n=function(e,n,t,r){var o;return null!=e&&I(o=e.type)?(n=n||d,function(e){var n=e.prototype;return!(!n||!n.render)}(o)?function(e,n,t,r){var o,i=e.type,l=e._component;if(null!=l){if(null!=l.shouldComponentUpdate&&!t&&!1===l.shouldComponentUpdate(e.props,l._nextState||l.state))return d;J(l,i,e),L({bind:l,name:"componentWillUpdate",args:[e.props,l._nextState]}),o="componentDidUpdate"}else o="componentDidMount",l=new i(e.props),e._component=l,J(l,i,e),L({bind:l,name:"componentWillMount"}),l._depth=++r.depth;l._VNode=e;var a=l._oldState,s=n.props;l.state=l._nextState,l._oldState=null,l._nextState=null,l.props=e.props;var u=N(l.render(l.props,l.state));return L({bind:l,name:o,args:"componentDidUpdate"===o?[s,a]:[]}),z(u,e),u}(e,n,t,r):function(e,n){var t,r,o=e.type;return e._component?r=e._component:(r=new W(e.props),e._component=r,r.render=G,r.constructor=o,r.props=e.props),t=N(r.render(e.props)),r._depth=++n.depth,z(t,e),t}(e,r)):e}(n,a,c,_)),I(a.type)&&(a=a._renders),n!==V?Q(n,a,s,c,_):(n._children=null==(x=(D=n).props.children)&&D.type!==g?[]:f([x],N),y=a.type,b=n.type,p(n,s),b===g?M(n,a,s,_):(y!==b&&(a=null),function(n,a,s){var c,f=(a=a||d)===d,_=a._dom;(c=n.type!==a.type||null==_?function(e){if("string"==typeof e.props)return document.createTextNode("");var n=e.type;if(n===v)return document.createComment("");var t=document.createElement(n);return t.onclick=g,t}(n):_)._VNode=n,function(n,l,a){if(l.type!==v){if(a=a||d,"string"==typeof l.props)return function(e,n,t){return n===t||(e.nodeValue=n)}(n,l.props,a.props);var s=a.props||d,p=l.props;null!=s&&function(e,n,r){for(var o in n)m(o)||o in t||null==r[o]&&u(e,o,null)}(n,s,p),function(e,n,l){for(var a in l)if(!m(a)&&!(a in t)){var s=l[a],p=r[a]?e[a]:n[a];s!==p&&("className"!==(a="class"===a?"className":a)?"style"!==a?u(e,a,s):o(e,s,p):i(e,s,p))}}(n,s,p),e(n,l.events,a.events)}}(c,n,f?null:a),l(n,"_dom",c),function e(n,t){n&&(null!=n._component?n._component.base=t:e(n._renderedBy,t))}(n,c),f&&function(e,n,t){var r=function(e){if(e){var n=e._dom;if(n)return n;var t=e._FragmentDomNodeChildren;return t?function e(n){for(var t=0;t<n.length;t++){var r=n[t];if(Array.isArray(r)){var o=e(r);if(o)return o}else if(r)return r}}(t):void 0}}(e._nextSibDomVNode),o=e._dom;o&&(function(e,n,t){var r,o=!0;n&&n!==e&&(o=!1,r=n),!o&&r?t.insertBefore(e,r):t.appendChild(e)}(o,r,n),function(e){var n=e._dom;null==e._parentDom&&p(e,n.parentNode);var t=e._nextSibDomVNode;if(null==t){var r=n.nextSibling;null!=r&&(t=r._VNode)}l(t,"_prevSibDomVNode",e),l(e,"_nextSibDomVNode",t);var o=e._prevSibDomVNode;if(null==o){var i=n.previousSibling;null!=i&&(o=i._VNode)}l(o,"_nextSibDomVNode",e),l(e,"_prevSibDomVNode",o)}(e))}(n,s)}(n,a,s),M(n,a,n._dom,_)),n._dom)}j(a)}function X(e,n){var t=y(g,null,e);n.hasChildNodes()&&function(e){for(var n;n=e.firstChild;)e.removeChild(n)}(n),Q(t,null,n,!1,{depth:0}),k(),F()}class Y extends W{componentDidMount(){this._init()}componentDidUpdate(e){(e&&(e.promise||e.componentPromise))!==(this.props.promise||this.props.componentPromise)&&this._init()}_init(){this.setState({inProgress:!0}),(this.props.promise||this.props.componentPromise)().then(e=>{e.__self||(e=y(e)),this.setState({render:e,inProgress:!1})}).catch(e=>this.setState({error:!0,inProgress:!1}))}render(e,n){return n.inProgress?Z(e.fallback||e.fallbackComponent)||"Loading":n.error?Z(e.errorComponent)||"An Error Occured":n.render}}function Z(e){return null==e||e.__self?e:y(e)}function ee(){return(ee=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ne(){var e=["[DeprecationWarning]"].concat(c.slice.call(arguments));console.warn.apply(console,e)}var te,re,oe=/\/+$/,ie=[],le={subscribe(e){ie.includes(e)||ie.push(e)},unsubscribe(e){for(var n=0;n<ie.length;n++)if(ie[n]===e)return ie.splice(n,1)},emit(e,n){for(var t of ie)t(e,n)},unsubscribeAll(){ie.length=0}};function ae(e){window.history.pushState(null,"",e),le.emit(e,{type:"load",native:!1})}function se(e){window.history.replaceState(null,"",e),le.emit(e,{type:"redirect",native:!1})}class ue extends W{constructor(e){super(e),this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this)}static __emitter(){le.emit(ue.path+ue.qs,{type:"popstate",native:!0})}static get path(){return location.pathname}static get qs(){return location.search}static get searchParams(){return new URLSearchParams(ue.qs)}componentDidMount(){le.subscribe(this._routeChangeHandler),window.addEventListener("popstate",ue.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",ue.__emitter),le.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return y("div",null,'The Requested URL "'+ue.path+'" was not found')}_routeChangeHandler(e){var n=ue.path.replace(oe,""),t=[];this.props.children.forEach(e=>{var r=pe(e.props.match),o=r.regex.exec(n);if(o){var i=e.props,l={};for(var a in r.params)l[r.params[a]]=o[a];t.push(y(i.component,ee({},e.props,{params:l})))}}),t.length||(t=y(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:t})}render(e,n){return y(g,null,n.child)}}function pe(e){if(null!=e.regex)return e;e=e.replace(oe,"");var n,t={},r=0;return{regex:(n=e.split("/").map(e=>":"===e[0]?(t[++r]=e.substr(1),"(\\S*?)"):e).join("/"),RegExp("^"+n+"(/?)$")),params:t}}te=ue,re=Object.getOwnPropertyDescriptor(te,"path").get.bind(te),Object.defineProperty(te,"getPath",{get:()=>(ne("getPath"," has been deprecated. Use 'path' instead"),re())});var de,ce=(de=pe,function(){return ne("absolutePath","()' has been deprecated Use 'createRoutePath()' instead"),de.apply(void 0,c.slice.call(arguments))});function fe(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault();var n=new URL(e.target.href);ae(n.pathname+n.search+n.hash)}}function me(e){return null!=e.href&&(e.onClick=fe),y("a",e)}var _e={};export default W;export{me as A,Y as AsyncComponent,W as Component,g as Fragment,_e as Path,ue as Router,le as RouterSubscription,ce as absolutePath,w as config,y as createElement,pe as createRoutePath,y as h,ae as loadURL,se as redirect,X as render};
//# sourceMappingURL=ui-lib.modern.js.map
