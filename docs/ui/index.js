const t={},n=[],e=/^aria[\-A-Z]/,o=/^xlink:?/,r={};function s(t,n){return function t(n,e,o){if(!n)return e;for(let r=0;r<n.length;r++){const s=n[r];Array.isArray(s)?t(s,e,o):e.push(o?o(s):s)}return e}(t,[],n)}const i=t.hasOwnProperty,c=t.constructor.assign||function(t){for(let n=1;n<arguments.length;n++){const e=arguments[n];for(const n in e)i.call(e,n)&&(t[n]=e[n])}return t},u=(t,n)=>{let e,o={};for(e in t)-1===n.indexOf(e)&&(o[e]=t[e]);return o},l=function(){},a=["key","ref"];function p(e,o){if(null==e||"boolean"==typeof e)return null;let r;null==o&&(o=t);const i=o.ref,c=o.key;let l;return null!=(o=u(o,a)).children?l=s([o.children]):(r=n.slice.call(arguments,2)).length&&(l=s(r)),o.children=l,d(e,o,c,i)}function f(t){return null==t||"boolean"==typeof t?p(r):"string"==typeof t||"number"==typeof t?d(null,String(t)):Array.isArray(t)?p(l,null,t):null!=t._dom?d(t.type,t.props,t.key):t}function d(t,n,e,o){return{type:t,props:n,key:e,ref:o,_dom:null,_children:null,_component:null,_renders:null,_renderedBy:null,_parentDom:null,_depth:0,constructor:void 0}}const h="undefined"!=typeof Promise,m=h?Promise.prototype.then.bind(Promise.resolve()):t=>setTimeout(t),_="function"==typeof requestAnimationFrame,y={hookSetup:l,diffed:l};function g(t,n){let e=y[t];e===l&&(e=null),y[t]=function(){e&&e.apply(0,arguments),n.apply(0,arguments)}}const v={scheduleRender:_?t=>requestAnimationFrame(t):m,eagerlyHydrate:!0,RAF_TIMEOUT:100,debounceEffect:null},b={value:1,checked:1},S={key:1,ref:1,children:1};function x(t,n,e){e=e||"";const o=t.style;if("string"==typeof(n=n||""))return void(o.cssText=n);const r="string"==typeof e;if(r)o.cssText="";else for(const t in e)null==n[t]&&(o[t]="");for(const t in n){const s=n[t];(r||s!==e[t])&&(o[t]=s)}}const k=t=>t.trim();function w(t,n,e,o){const r=Array.isArray;r(n)&&(n=k(n.join(" "))),r(e)&&(e=k(e.join(" "))),n!==e&&o.batch.push({node:t,action:1,attr:o.isSvg?"class":"className",value:n})}function C(t,n,o,r){if("o"===n[0]&&"n"===n[1])return function(t,n,e){n=n.substr(2).toLowerCase(),null==e?(t.removeEventListener(n,D),delete t._events[n]):(t.addEventListener(n,D),t._events[n]=e)}(t,n,o);const s=null==o||!1===o&&!e.test(n);return!r&&n in t?t[n]=s?"":o:s?t.removeAttribute(n):t.setAttribute(n,o)}function D(t){return this._events[t.type].call(this,t)}function U(t){if(null==t)return;const n=t.parentNode;n&&n.removeChild(t)}function P(t,n){!function(t){A(N,t)}(n),function(t){null!=t&&A(E,t)}(t)}const N={_VNode:1,_events:1},E={_children:1,_component:1,_depth:1,_dom:1,_renderedBy:1,_renders:1,_parentDom:1,key:1,ref:1};function A(t,n){if(null!=n)for(const e in t)n[e]=null}const V=[],L=[];function T(t){let n;for(;n=t.pop();)F(n)}function R(t){const n=t.name;return"componentDidMount"===n?V.push(t):"componentDidUpdate"===n?L.push(t):void F(t)}function F(t){const n=t.name,e=t.bind,o=e[n];if(e._lastLifeCycleMethod=n,!o)return;const r=t.args,s="function"==typeof e.componentDidCatch,i=()=>o.apply(e,r);if(h)m(i).catch(t=>{if(!s)throw t;e.componentDidCatch(t)});else try{i()}catch(t){if(s)return e.componentDidCatch(t);throw t}}function M(t){!function(t){const n=t.length;for(let e=0;e<n;e++){const n=t[e],r=n.node,s=n.refDom,i=n.value,c=n.VNode;let u=n.attr;switch(n.action){case 4:i.insertBefore(r,s);break;case 1:C(r,u,i);break;case 3:x(r,i.newValue,i.oldValue);break;case 2:U(r),P(c,r);break;case 7:P(c,r);break;case 6:r.removeAttributeNS("http://www.w3.org/1999/xlink",u);break;case 5:u!==(u=u.replace(o,""))?r.setAttributeNS("http://www.w3.org/1999/xlink",u.toLowerCase(),i):C(r,u,i,!0)}}}(t),y.diffed(),T(V),T(L)}const O=[];class q{constructor(t){this.state={},this.props=t}render(t,n){return null}setState(t){if(this._oldState=c({},this.state),this._nextState=c({},this._nextState||this.state),"function"==typeof t){const n=t(this._nextState,this.props);if(null==n)return;c(this._nextState,n)}else c(this._nextState,t);var n;(n=this)._dirty=!0,1===O.push(n)&&v.scheduleRender(H)}forceUpdate(t){if(null==this._VNode)return;const n=[],e=!1!==t;z(this._VNode,c({},this._VNode),this._VNode._parentDom,e,{depth:this._depth,batch:n,isSvg:!1}),"function"==typeof t&&t(),M(n)}}function H(){let t;for(O.sort((t,n)=>t._depth-n._depth);t=O.pop();)t._dirty&&(t._dirty=!1,t.forceUpdate(!1))}function I(t,n){t&&("function"==typeof t?t(n):t.current=n)}function W(n,e,o){const r=n.ref,s=(e||t).ref;r&&r!==s&&(I(r,o),s&&I(e.ref,null))}function $(){return{current:null}}const j=t=>"function"==typeof t&&t!==l;function B(t){return this.constructor(t)}function K(e,o,s,i){if(e.type===r)return;const u=e._children||n,a=(o||t)._children||n;return u!==a?function(n,e,o,s,i){const u=n.type===l,a=e.length,f=o.length,d=Math.max(a,f),h=u?i.next||(G(o[f-1])||t).nextSibling:null;for(let n=0;n<d;n++){const u=e[n]||(n<a?p(r):null);let l=o[n]||t,f=(G(l)||t).nextSibling||h;z(u,l,s,!1,c({},i,{next:f}))}}(e,u,a,s,i):void 0}function G(e){if(e&&e!==t){for(;j(e.type);)e=e._renders;if(e.type===l){const t=e._children||n;return G(t[t.length-1])}return e._dom}}function Z(n,e,o){if(null==n||n===t)return;o=n.type===l?-1:o||0,I(n.ref,null),Z(n._renders,e,o);const r=n._component;null!=r&&(r.setState=l,r.forceUpdate=l,r._VNode=null,R({name:"componentWillUnmount",bind:r}));const s=n._children;if(function(t,n,e){if(function(t){return"function"!=typeof t.type}(t)){const o=t._dom;null!=o&&(function(t,n,e){const o=t.props;for(const t in o)"o"===t[0]&&"n"===t[1]&&e.batch.push({action:1,node:n,attr:t})}(t,o,n),n.batch.push({node:o,action:e>0?7:2,VNode:t}))}}(n,e,o),s){const t=s.length;for(let n=0;n<t;n++)Z(s[n],e,o+1);s.length=0}}function z(n,e,i,u,a){if(null==n||"boolean"==typeof n)return void Z(e,a);if(!((p=n)&&void 0===p.constructor||(console.warn("component not of expected type =>",p),0)))return null;var p;if(e===n)return n._dom;let d=(e=e||t).type,h=n.type,m=j(h);if(h===d&&m&&(n._component=e._component),n._parentDom=i,h!==d){if(!a.next){const n=G(e);a.next=(n||t).nextSibling}Z(e,a),e=t}const _=n;if("string"!=typeof n.props&&h!==r&&(n=function(n,e,o,r){let s;if(null!=n&&j(s=n.type)){let i;return e=e||t,i=function(t){const n=t.prototype;return!(!n||!n.render)}(s)?function(n,e,o,r){let s;const i=n.type;let u=n._component;const l=null!=u;if(l){if(s="componentDidUpdate",null!=u.shouldComponentUpdate&&!o&&!1===u.shouldComponentUpdate(n.props,u._nextState||u.state))return t}else s="componentDidMount",u=new i(n.props),n._component=u,u._depth=++r.depth;u._VNode=n;const a=u._oldState,p=e.props;R({bind:u,name:l?"componentWillUpdate":"componentWillMount",args:l?[n.props,u._nextState]:null}),u.state=function(n,e,o){const r=c({},n.state||t,n._nextState||t),s=function(t,n,e){const o=t.getDerivedStateFromProps;return null!=o?c({},o(n,e)):null}(e,o.props,r);return s&&c(r,s),r}(u,i,n),u._oldState=null,u._nextState=null,u.props=n.props;const d=f(u.render(u.props,u.state));return R({bind:u,name:s,args:"componentDidUpdate"===s?[p,a]:[]}),W(n,e,u),d}(n,e,o,r):function(t,n){let e;const o=t.type;let r;return t._component?r=t._component:(r=new q(t.props),t._component=r,r.render=B,r.constructor=o,r.props=t.props,r._depth=++n.depth),r._VNode=t,y.hookSetup(r),e=f(r.render(t.props)),y.hookSetup(null),e}(n,r),n._renders=i,i._renderedBy=n,i}return n}(n,e,u,a),a.isSvg="svg"===n.type||a.isSvg),j(e.type)&&(e=e._renders),n!==_){if(n===t)return;return z(n,e,i,u,a)}let g;return n._children=function(t){let n=t.props.children;if(t.type!==l){if(null==n)return[]}else n&&!n.length&&(n=null);return s([n],f)}(n),d=e.type,h=n.type,d!==h&&(e=null),h===l?K(n,e,i,a):(function(n,e,s,i){const c=(e=e||t)===t;let u;const l=e._dom;u=n.type!==e.type||null==l?function(t,n){if("string"==typeof t.props)return document.createTextNode("");{const e=t.type;if(e===r)return document.createComment("$");let o;return o=n.isSvg?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e),o._events={},o}}(n,i):l,u._VNode=n,n._dom=u,function(n,e,s,i){if(e.type===r)return;if(s=s||t,"string"==typeof e.props)return function(t,n,e){return n===e||(t.nodeValue=n)}(n,e.props,s.props);const c=s.props,u=e.props;null!=c&&function(t,n,e,r){for(let s in n)if(!S[s]&&null==e[s]&&null!=n[s]){const n=s===(s=s.replace(o,""))?1:6;r.batch.push({node:t,action:n,attr:s})}}(n,c,u,i),function(t,n,e,o){for(let r in e){if(r in S)continue;let s=e[r],i=b[r]?t[r]:n[r];s!==i&&(r="class"===r?"className":r,"className"!==r?o.batch.push("style"!==r?{node:t,action:o.isSvg?5:1,attr:r,value:s}:{node:t,action:3,value:{newValue:s,oldValue:i}}):w(t,s,i,o))}}(n,c||t,u,i)}(u,n,c?null:e,i),c&&i.batch.push({node:u,action:4,refDom:i.next,value:s,VNode:n})}(n,e,i,a),g=n._dom,a.isSvg="foreignObject"!=h&&a.isSvg,K(n,e,g,a),W(n,e,g)),g}function J(t,n){const e=p(l,void 0,[t]);n.hasChildNodes()&&function(t){let n;for(;n=t.firstChild;)t.removeChild(n)}(n);const o=[];z(e,void 0,n,!1,{depth:0,batch:o,isSvg:void 0!==n.ownerSVGElement}),M(o)}const Q=["boolean","string","number"];function X(t,n){return null==t||Q.indexOf(typeof t)>-1||void 0===t.constructor?t:p(t,n)}class Y extends q{componentDidMount(){this._init()}componentDidUpdate(t){(t&&(t.promise||t.componentPromise))!==(this.props.promise||this.props.componentPromise)&&this._init()}_init(){this.setState({inProgress:!0}),(this.props.promise||this.props.componentPromise)().then(t=>{this.setState({render:t,inProgress:!1})}).catch(t=>this.setState({error:!0,inProgress:!1}))}render(t,n){return n.inProgress?X(t.fallback||t.fallbackComponent)||"Loading":n.error?X(t.errorComponent)||"An Error Occured":X(n.render,u(t,["fallback","fallbackComponent","promise","componentPromise"]))}}const tt=/\/+$/;function nt(t){return 1===t.length?t:t.replace(tt,"")}const et=[],ot={subscribe(t){et.includes(t)||et.push(t)},unsubscribe(t){et.splice(et.indexOf(t),1)},emit(t,n){et.forEach(e=>e(t,n))},unsubscribeAll(){et.length=0}};function rt(t){window.history.pushState(null,"",t),ot.emit(t,{type:"load",native:!1})}function st(t){window.history.replaceState(null,"",t),ot.emit(t,{type:"redirect",native:!1})}class it extends q{constructor(t){super(t),this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this)}static __emitter(){ot.emit(it.path+it.qs,{type:"popstate",native:!0})}static get path(){return location.pathname}static get qs(){return location.search}static get searchParams(){return new URLSearchParams(it.qs)}static _getParams(t,n){const e={};for(const o in t)e[t[o]]=decodeURIComponent(n[o]);return e}static getCurrentParams(t){const n=(t=ct(t)).params,e=t.regex.exec(it.path);return e?it._getParams(n,e):{}}componentDidMount(){ot.subscribe(this._routeChangeHandler),window.addEventListener("popstate",it.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",it.__emitter),ot.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return p("div",null,`The Requested URL "${it.path}" was not found`)}_routeChangeHandler(t){const n=nt(it.path);let e=[];this.props.children.forEach(t=>{const o=ct(t.props.match),r=o.regex.exec(n);if(r){const n=t.props,s=it._getParams(o.params,r);e.push(X(n.component,c({},t.props,{params:s})))}}),e.length||(e=p(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:e})}render(t,n){return p(l,null,n.child)}}function ct(t){if(null!=t.regex)return t;t=nt(t);const n={};let e=0;return{regex:(o=t.split("/").map(t=>":"===t[0]?(n[++e]=t.substr(1),"([^?\\/]+)"):t).join("/"),RegExp(`^${o}(/?)$`)),params:n};var o}function ut(t){if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault();const n=new URL(this.href,location.href);rt(n.pathname+n.search+n.hash)}function lt(t){return null!=t.href&&(t.onClick=ut),p("a",t)}const at={};function pt(t,n){return!t||n.some((n,e)=>n!==t[e])}function ft(t,n,e){return t[n]||(t[n]=dt(0,e))}function dt(t,n){return"function"==typeof n?n(t):n}let ht=0,mt=null;const _t=[];function yt(t){const n=t.cleanUp;"function"==typeof n&&(n(),t.cleanUp=null)}function gt(t){let n=t.cb;n&&"function"==typeof(n=n())&&(t.cleanUp=n),t.cb=null}function vt(){_t.forEach(t=>{for(const e in t)(n=t[e]).resolved||yt(n),gt(n);var n}),_t.length=0}const bt=v.debounceEffect||(_?function(t){const n=()=>{cancelAnimationFrame(e),clearTimeout(o),t()};let e,o;o=setTimeout(n,v.RAF_TIMEOUT),e=requestAnimationFrame(n)}:m);function St(){return[mt,ht++]}function xt(t,n){const e=St(),o=e[1],r=e[0]._hooksData;let s=r[o]||{};return pt(s.args,n)?(r[o]=null,s=ft(r,o,()=>({hookState:t()})),s.args=n,s.hookState):s.hookState}function kt(t,n){return xt(()=>t,n)}function wt(t){return xt(()=>({current:t}),[])}function Ct(){const n=this._pendingEffects;for(const e in n||t)yt(n[e]);this._pendingEffects=null}function Dt(t,n){const e=St(),o=e[0],r=e[1],s=o._hooksData;let i=s[r]||{};const c=o._pendingEffects=o._pendingEffects||{},u=c[r];if(!pt(i.args,n))return void(u&&(u.resolved=!0));s[r]=i,i.args=n;const l=u?gt(u)||u.cleanUp:null;var a;c[r]={cb:t,cleanUp:l},-1===_t.indexOf(a=c)&&_t.push(a),o.componentWillUnmount=Ct}g("hookSetup",function(t){mt=t,ht=0,t&&(t._hooksData||(t._hooksData=[]))}),g("diffed",function(){bt(vt)});const Ut={};function Pt(t,n,e){const o=St(),r=o[0],s=ft(r._hooksData,o[1],()=>({hookState:e?e(n):dt(null,n)}));return[s.hookState,s.args||(s.args=n=>{const e=t(s.hookState,n);s.hookState=e,r.setState(Ut)})]}function Nt(t){return Pt(dt,t)}export default q;export{lt as A,Y as AsyncComponent,q as Component,l as Fragment,at as Path,it as Router,ot as RouterSubscription,v as config,p as createElement,$ as createRef,ct as createRoutePath,p as h,rt as loadURL,st as redirect,J as render,kt as useCallback,Dt as useEffect,xt as useMemo,Pt as useReducer,wt as useRef,Nt as useState};
//# sourceMappingURL=ui-lib.modern.js.map
