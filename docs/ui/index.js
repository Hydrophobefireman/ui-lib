const t={},n=[],e=/^aria[\-A-Z]/,o=/^xlink:?/,r={},s=function(){},i="undefined"!=typeof Promise?Promise.prototype.then.bind(Promise.resolve()):t=>setTimeout(t),c="function"==typeof requestAnimationFrame,u={createElement:s,_hookSetup:s,diffStart:s,diffEnd:s,lifeCycle:s,domNodeCreated:s,componentInstance:s};function l(t){for(const n in t){const e=t[n];if(!e)throw new Error("invalid callback: "+e);let o=u[n];u[n]=function(){o.apply(0,arguments),e.apply(0,arguments)}}}function a(t){const n=n=>{cancelAnimationFrame(e),clearTimeout(o),t()};let e,o=setTimeout(n,p.RAF_TIMEOUT);e=requestAnimationFrame(n)}const p={window:"undefined"!=typeof window?window:null,scheduleRender:c?a:i,warnOnUnmountRender:!1,RAF_TIMEOUT:100,debounceEffect:null,inMemoryRouter:!1,memoryRouteStore:"undefined"!=typeof window&&window.localStorage,unmountOnError:!0,isSSR:"undefined"==typeof window};function d(t,n,e){if(!t)return n;for(let o=0;o<t.length;o++){const r=t[o];Array.isArray(r)?d(r,n,e):n.push(e?e(r):r)}return n}function f(t,n){return d(t,[],n)}const h=t.hasOwnProperty,m=t.constructor,_=m.assign||function(t){for(let n=1;n<arguments.length;n++){const e=arguments[n];for(const n in e)h.call(e,n)&&(t[n]=e[n])}return t},y=(t,n)=>{let e,o={};for(e in t)-1===n.indexOf(e)&&(o[e]=t[e]);return o};function g(t,n){-1===t.indexOf(n)&&t.push(n)}function v(t){return n.slice.call(t,2)}const S=m.create||function(){return{}},x=["key","ref"];function w(n,e){if(null==n||"boolean"==typeof n)return null;let o;null==e&&(e=t);const r=e.ref,s=e.key;let i;null!=(e=y(e,x)).children?i=f([e.children]):(o=v(arguments)).length&&(i=f(o)),e.children=i;const c=b(n,e,s,r);return u.createElement(c,r,s),c}function k(t){return null==t||"boolean"==typeof t?w(r):"string"==typeof t||"number"==typeof t?b(null,String(t)):Array.isArray(t)?w(s,null,t):t._used?b(t.type,t.props,t.key):(t._used=!0,t)}function b(t,n,e,o){return _(S(null),{type:t,props:n,key:e,ref:o,_dom:null,_children:null,_component:null,_renders:null,_parentDom:null,_used:!1,constructor:void 0})}function C(t,n){t&&("function"==typeof t?t(n):t.current=n)}function U(n,e,o){const r=n.ref,s=(e||t).ref;r&&r!==s&&(C(r,o),s&&C(e.ref,null))}function R(){return{current:null}}const E={value:1,checked:1},D={key:1,ref:1,children:1},N=t=>t.trim();function V(t,n,e,o){const r=Array.isArray;r(n)&&(n=N(n.join(" "))),r(e)&&(e=N(e.join(" "))),n!==e&&A({node:t,action:1,attr:o.isSvg?"class":"className",value:n,isSSR:1===o.mode})}function P(t,n,o,r,s){if("o"===n[0]&&"n"===n[1])return function(t,n,e){n=n.substr(2).toLowerCase();const o=t._events;null==e?(t.removeEventListener(n,O),delete o[n]):(o[n]||t.addEventListener(n,O),o[n]=e)}(t,n,o);const i=null==o||!1===o&&!e.test(n);return r||s||!(n in t)?i?t.removeAttribute(n):t.setAttribute(n,o):t[n]=i?"":o}function O(t){return this._events[t.type].call(this,t)}function A(t){const n=t.node,e=t.refDom,r=t.value,s=t.VNode;let i=t.attr;switch(t.action){case 4:r.insertBefore(n,e);break;case 1:P(n,i,r,!1,t.isSSR);break;case 3:!function(t,n,e){e=e||"";const o=t.style;if("string"==typeof(n=n||""))return void(o.cssText=n);const r="string"==typeof e;if(r)o.cssText="";else for(const t in e)null==n[t]&&(o[t]="");for(const t in n){const s=n[t];(r||s!==e[t])&&("-"==t[0]?o.setProperty(t,s):o[t]=s)}}(n,r.newValue,r.oldValue);break;case 2:!function(t){if(null==t)return;const n=t.parentNode;n&&n.removeChild(t)}(n),M(s,n);break;case 7:M(s,n);break;case 6:n.removeAttributeNS("http://www.w3.org/1999/xlink",i);break;case 5:i!==(i=i.replace(o,""))?n.setAttributeNS("http://www.w3.org/1999/xlink",i.toLowerCase(),r):P(n,i,r,!0,t.isSSR)}}function M(t,n){!function(t){L(T,t)}(n),function(t){L(I,t)}(t)}const T={_VNode:1,_events:1},I={_children:1,_component:1,_dom:1,_renders:1,_parentDom:1,_used:1,key:1,ref:1};function L(t,n){if(null!=n)for(const e in t)n[e]=null}function F(){p.warnOnUnmountRender&&console.warn("Component state changed after unmount",this)}function W(n,e){if(null==n||n===t)return;e=n.type===s||"string"==typeof n.props?-1:e||0,C(n.ref,null),W(n._renders,e);const o=n._component;null!=o&&(o.setState=F,o.forceUpdate=F,o._VNode=null,j({name:"componentWillUnmount",bind:o}));const r=n._children;if(function(t,n){let e;!function(t){return"function"!=typeof t.type}(t)?A({action:7,VNode:t,node:e}):(e=t._dom,null!=e&&(function(t,n){const e=t.props;for(const t in e)"o"===t[0]&&"n"===t[1]&&A({action:1,node:n,attr:t})}(t,e),A({node:e,action:n>0?7:2,VNode:t})))}(n,e),r){const t=r.length;for(let n=0;n<t;n++)W(r[n],e+1);r.length=0}/*#__NOINLINE__*/}const $=[],q=[];function H(t){t.splice(0).forEach(K)}function j(t){const n=t.name;return"componentDidMount"===n?$.push(t):"componentDidUpdate"===n?q.push(t):void K(t)}function K(t){const n=t.name,e=t.bind,o=e[n];if(u.lifeCycle(n,e),e._lastLifeCycleMethod=n,!o)return;const r=t.args,s="function"==typeof e.componentDidCatch;function i(t){if(s)return e.componentDidCatch(t);throw p.unmountOnError&&W(e._VNode),t}try{const t=o.apply(e,r);t&&t.then&&t.catch&&t.catch(i)}catch(t){i(t)}}function B(){u.diffEnd(),H($),H(q)}const J=[];class G{constructor(t,n){this._pendingEffects=void 0,this._hooksData=void 0,this._depth=void 0,this.props=void 0,this.state=void 0,this._oldState=void 0,this._nextState=void 0,this._sharedContext=void 0,this.context=void 0,this._VNode=void 0,this._dirty=void 0,this._lastLifeCycleMethod=void 0,this.state={},this.props=t,this.context=n,u.componentInstance(this,t)}render(t,n,e){return null}setState(t){if(this._oldState=_({},this.state),this._nextState=_({},this._nextState||this.state),"function"==typeof t){const n=t(this._nextState,this.props);if(null==n)return;_(this._nextState,n)}else _(this._nextState,t);Z(this)}forceUpdate(t,n){if(null==this._VNode)return;const e=!1!==t,o=!0!==n;u.diffStart(this,e),rt(this._VNode,_({},this._VNode),this._VNode._parentDom,e,{depth:this._depth,isSvg:!1,context:this._sharedContext||{},mode:0}),"function"==typeof t&&t(),o&&B()}}function Z(t){t._dirty=!0,1===J.push(t)&&p.scheduleRender(z)}function z(){let t;for(J.sort((t,n)=>t._depth-n._depth);t=J.pop();)t._dirty&&(t._dirty=!1,t.forceUpdate(!1,!0));B()}let Q=0;function X(t){const n="$"+Q++,e=function(t,n){const e=t.children;return"function"==typeof e?e(n):e[0](n)},o={$id:n,Consumer:e,Provider:class extends G{constructor(t,e){super(t,e),this._subs=void 0,this._o=void 0,this._subs=[],this._o={[n]:this}}getChildContext(){return this._o}shouldComponentUpdate(t){return this.props.deopt&&t.value!==this.props.value&&this._subs.some(t=>Z(t)),!0}add(t){const n=this._subs;g(n,t);const e=t.componentWillUnmount;t.componentWillUnmount=()=>{n.splice(n.indexOf(t),1),e&&e.call(t)}}render(){return w(s,null,this.props.children)}},def:t};return e.contextType=o,o}const Y=t=>"function"==typeof t&&t!==s;function tt(t){return this.constructor(t,this.context)}function nt(t,n){t._sharedContext=n.context,t.context=n.contextValue;const e=n.provider;e&&e.add(t)}function et(e,o,i,c){if(e.type===r)return;const u=e._children||n,l=(o||t)._children||n;return u!==l?function(n,e,o,i,c){const u=n.type===s,l=e.length,a=o.length,p=Math.max(l,a),d=u?c.next||(ot(o[a-1])||t).nextSibling:null;for(let n=0;n<p;n++){const s=e[n]||(n<l?w(r):null);let u=o[n]||t,a=(ot(u)||t).nextSibling||d;rt(s,u,i,!1,_({},c,{next:a}))}}(e,u,l,i,c):void 0}function ot(e){if(e&&e!==t){for(;Y(e.type);)e=e._renders;if(e.type===s){const t=e._children||n;return ot(t[t.length-1])}return e._dom}}function rt(n,e,i,c,l){if(null==n||"boolean"==typeof n)return void W(e);if(!((a=n)&&void 0===a.constructor||(console.warn("component not of expected type =>",a),0)))return null;var a;if(e===n)return n._dom;let d=(e=e||t).type,h=n.type,m=Y(h);if(h===d&&m&&(n._component=e._component),n._parentDom=i,n._used=!0,h!==d){if(!l.next){const n=ot(e);l.next=(n||t).nextSibling}W(e),e=t}const y=n;if("string"!=typeof n.props&&h!==r&&(n=function(n,e,o,r){let i;if(null!=n&&Y(i=n.type)){let c;e=e||t;const l=i.contextType,a=l&&r.context[l.$id];r.contextValue=a?a.props.value:l&&l.def,r.provider=a,c=function(t){const n=t.prototype;return!(!n||!n.render)}(i)?function(n,e,o,r){let i;const c=n.type;let u=n._component;const l=null!=u;if(l){if(i="componentDidUpdate",null!=u.shouldComponentUpdate&&!o&&!1===u.shouldComponentUpdate(n.props,u._nextState||u.state))return t}else i="componentDidMount",u=new c(n.props,r.contextValue),1===r.mode&&(u.setState=u.forceUpdate=s),n._component=u,u._depth=++r.depth;nt(u,r),u._VNode=n;const a=u._oldState,p=e.props;j({bind:u,name:l?"componentWillUpdate":"componentWillMount",args:l?[n.props,u._nextState,r.contextValue]:null}),u.state=function(n,e,o){const r=_({},n.state||t,n._nextState||t),s=function(t,n,e){const o=t.getDerivedStateFromProps;return null!=o?_({},o(n,e)):null}(e,o.props,r);return s&&_(r,s),r}(u,c,n),u._oldState=null,u._nextState=null,u.props=n.props;const d=k(u.render(u.props,u.state,r.contextValue));let f=null;return l&&null!=u.getSnapshotBeforeUpdate&&(f=u.getSnapshotBeforeUpdate(p,a)),1!==r.mode&&j({bind:u,name:i,args:l?[p,a,f]:[]}),U(n,e,u),d}(n,e,o,r):function(t,n){let e;const o=t.type;let r;return t._component?r=t._component:(r=new G(t.props,n.contextValue),1===n.mode&&(r.setState=r.forceUpdate=s),t._component=r,r.render=tt,r.constructor=o,r.props=t.props,r._depth=++n.depth),nt(r,n),r._VNode=t,u._hookSetup(r),e=k(r.render(t.props,null,n.contextValue)),u._hookSetup(null),e}(n,r),n._renders=c,r.provider=r.contextValue=void 0;const p=n._component;if(p&&"function"==typeof p.getChildContext){const t=p.getChildContext();r.context=_({},r.context,t)}return c}return n}(n,e,c,l),l.isSvg="svg"===n.type||l.isSvg),Y(e.type)&&(e=e._renders),n!==y){if(n===t)return;return rt(n,e,i,c,l)}let g;return n._children=function(t){let n=t.props.children;if(t.type!==s){if(null==n)return[]}else n&&!n.length&&(n=null);return f([n],k)}(n),d=e.type,h=n.type,d!==h&&(e=null),h===s?et(n,e,i,l):(function(n,e,s,i){const c=(e=e||t)===t;let l;const a=e._dom;l=n.type!==e.type||null==a?function(t,n){const e=p.window.document;if("string"==typeof t.props)return e.createTextNode("");{const o=t.type;if(o===r)return e.createComment("$");let s;return s=n.isSvg?e.createElementNS("http://www.w3.org/2000/svg",o):e.createElement(o),s._events={},u.domNodeCreated(s,t),s}}(n,i):a,l._VNode=n,n._dom=l,function(n,e,s,i){if(e.type===r)return;if(s=s||t,"string"==typeof e.props)return function(t,n,e){return n===e||(t.nodeValue=n)}(n,e.props,s.props);const c=s.props,u=e.props;null!=c&&function(t,n,e){for(let r in n)D[r]||null!=e[r]||null==n[r]||A({node:t,action:r===(r=r.replace(o,""))?1:6,attr:r})}(n,c,u),function(t,n,e,o){for(let r in e){if(r in D)continue;let s=e[r],i=E[r]?t[r]:n[r];s!==i&&(r="class"===r?"className":r,"className"!==r?"style"!==r?1===o.mode&&"o"===r[0]&&"n"===r[1]||A({node:t,action:o.isSvg?5:1,attr:r,value:s}):A({node:t,action:3,value:{newValue:s,oldValue:i}}):V(t,s,i,o))}}(n,c||t,u,i)}(l,n,c?null:e,i),c&&A({node:l,action:4,refDom:i.next,value:s,VNode:n})}(n,e,i,l),g=n._dom,l.isSvg="foreignObject"!=h&&l.isSvg,et(n,e,g,l),U(n,e,g)),g}function st(t,n){let e;const o=w(s,e,[t]);n.hasChildNodes()&&function(t){let n;for(;n=t.firstChild;)t.removeChild(n)}(n),rt(o,e,n,!1,{depth:0,isSvg:void 0!==n.ownerSVGElement,context:{},mode:0}),B()}const it=["boolean","string","number"];function ct(t,n){return null==t||it.indexOf(typeof t)>-1?t:void 0===t.constructor?function(t){let n;return(n=(t=function(t,n){if(!t)return null;n=_({},t.props,n),arguments.length>2&&(n.children=v(arguments));let e=y(n,x);return b(t.type,e,n.key||t.key,n.ref||t.ref)}(t)).props.children)&&(t.props.children=f([n],ct)),t}(t):w(t,n)}const ut=t=>t.promise||t.componentPromise;class lt extends G{componentDidMount(){this._init()}componentDidUpdate(t){(t&&ut(t))!==ut(this.props)&&this._init()}_init(){this.setState({inProgress:!0});const t=ut(this.props);t().then(n=>{t===ut(this.props)&&this.setState({render:n,inProgress:!1,error:!1})}).catch(t=>{console.error("AsyncComponent:",t),this.setState({error:!0,inProgress:!1,stack:t})})}render(t,n){return n.inProgress?ct(t.fallback||t.fallbackComponent)||"Loading":n.error?ct(t.errorComponent,{stack:this.state.stack})||"An Error Occured":ct(n.render,y(t,["fallback","fallbackComponent","promise","componentPromise"]))}}const at=[],pt={_routerSubscriptions:at,subscribe(t){g(at,t)},unsubscribe(t){at.splice(at.indexOf(t),1)},emit(t,n){at.forEach(e=>e(t,n))},unsubscribeAll(){at.length=0}};function dt(t,n){if(!p.inMemoryRouter)return window.history[n](null,"",t);{const n=new URL(t,window.location.href);p.memoryRouteStore.setItem("UI--ROUTE",JSON.stringify({path:n.pathname,qs:n.search}))}}function ft(t){dt(t,"pushState"),pt.emit(t,{type:"load",native:!1})}function ht(t){dt(t,"replaceState"),pt.emit(t,{type:"redirect",native:!1})}const mt=/\/+$/;function _t(t){return 1===t.length?t:t.replace(mt,"")}function yt(t){if(!t)throw Error("Invalid value for match: "+t);if(null!=t.regex)return t;t=_t(t);const n={};let e=0;return{regex:(o=t.split("/").map(t=>":"===t[0]?(n[++e]=t.substr(1),"([^?\\/]+)"):t).join("/"),RegExp(`^${o}(/?)$`)),params:n};var o}const gt=X(null);class vt extends G{constructor(t){super(t),this._previous=void 0,this.state={},this._routeChangeHandler=this._routeChangeHandler.bind(this),this.componentDidUpdate=this._setRouteMethod}_setRouteMethod(){p.inMemoryRouter=!!this.props.inMemoryRouter}static __emitter(){pt.emit(vt.path+vt.qs,{type:"popstate",native:!0})}static get path(){if(p.inMemoryRouter){const t=p.memoryRouteStore.getItem("UI--ROUTE");return t&&JSON.parse(t).path||"/"}return p.window.location.pathname}static get qs(){if(p.inMemoryRouter){const t=p.memoryRouteStore.getItem("UI--ROUTE");return t&&JSON.parse(t).qs||"?"}return p.window.location.search}static get searchParams(){return new URLSearchParams(vt.qs)}static _getParams(t,n){const e={};for(const o in t)e[t[o]]=decodeURIComponent(n[o]);return e}static getCurrentParams(t){const n=(t=yt(t)).params,e=t.regex.exec(vt.path);return e?vt._getParams(n,e):{}}componentDidMount(){this._setRouteMethod(),pt.subscribe(this._routeChangeHandler),window.addEventListener("popstate",vt.__emitter),this._routeChangeHandler(null)}componentWillUnmount(){window.removeEventListener("popstate",vt.__emitter),pt.unsubscribe(this._routeChangeHandler)}_notFoundComponent(){return w("div",null,`The Requested URL "${vt.path}" was not found`)}_routeChangeHandler(t){const n=this._previous,e=vt.path;if(this._previous=e,n===e)return;const o=_t(vt.path),r=this.props.children;let s,i;for(let t=0;t<r.length;t++){const n=r[t],e=yt(n.props.match),c=e.regex.exec(o);if(c){const t=n.props;i=vt._getParams(e.params,c),s=ct(t.component,_({},n.props,{params:i}));break}}s||(s=w(this.props.fallbackComponent||this._notFoundComponent)),this.setState({child:s,params:i})}render(t,n){return w(gt.Provider,{value:{params:n.params,path:vt.path,search:vt.searchParams}},n.child)}}const St={};function xt(t,n){if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;n||window.scroll(0,0),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault();const e=new URL(this.href,location.href);ft(e.pathname+e.search+e.hash)}function wt(t,n,e,o){return t.call(o,n,e)}class kt extends G{constructor(t){super(t),this._onClick=void 0,this._onClick=t=>{const n=this.props.preserveScroll,e=t.currentTarget;wt(xt,t,n,e);const o=this.props.onClick;o&&wt(o,t,n,e)}}render(t){return w("a",_({},t,{onClick:!t.native&&this._onClick}))}}function bt(t,n){return!t||n.some((n,e)=>n!==t[e])}function Ct(t,n,e){return t[n]||(t[n]=Ut(0,e))}function Ut(t,n){return"function"==typeof n?n(t):n}let Rt=0,Et=null;const Dt=[],Nt=[];function Vt(t){const n=t.cleanUp;"function"==typeof n&&(n(),t.cleanUp=null)}function Pt(t){let n=t.cb;n&&"function"==typeof(n=n())&&(t.cleanUp=n),t.resolved=!0,t.cb=null}function Ot(t){t.resolved||Vt(t),Pt(t)}function At(t){t.forEach(t=>{for(const n in t)Ot(t[n])})}function Mt(){return At(Dt)}const Tt=c?a:i;function It(){if(null==Et)throw new Error("Hook candidate not found, make sure you're running hooks inside a component");return[Et,Rt++]}function Lt(t,n){const e=It(),o=e[1],r=e[0]._hooksData;let s=r[o]||{};return bt(s.args,n)?(r[o]=null,s=Ct(r,o,()=>({hookState:t()})),s.args=n,s.hookState):s.hookState}function Ft(t,n){return Lt(()=>t,n)}function Wt(t){const n=It(),e=n[0],o=n[1],r=e._sharedContext&&e._sharedContext[t.$id];if(!r)return t.def;const s=e._hooksData;Ct(s,o,{args:null,hookState:!1});const i=s[o];return i.hookState||(i.hookState=!0,r.add(e)),r.props.value}function $t(n,e){for(const e in n||t)Vt(n[e]);e._pendingEffects=null}function qt(){const n=this._pendingEffects||t,e=n.async;$t(n.sync,this),$t(e,this)}function Ht(t,n,e){if(p.isSSR)return;const o=e===Nt?"sync":"async",r=It(),s=r[0],i=r[1],c=s._hooksData;let u=c[i]||{};const l=(s._pendingEffects=s._pendingEffects||{sync:{},async:{}})[o],a=l[i];if(!bt(u.args,n))return;c[i]=u,u.args=n;const d=a?(a.resolved=!1)||Pt(a)||a.cleanUp:null;if(l[i]={cb:t,cleanUp:d},g(e,l),!s.__attachedUnmount){s.__attachedUnmount=!0;const t=s.componentWillUnmount;s.componentWillUnmount=t?function(){t.call(s),qt.call(s)}:qt}}function jt(t,n){return Ht(t,n,Dt)}function Kt(t,n){return Ht(t,n,Nt)}l({_hookSetup:function(t){Et=t,Rt=0,t&&(t._hooksData||(t._hooksData=[]))},diffEnd:function(){const t=p.debounceEffect||Tt;At(Nt),t(Mt)}});const Bt={};function Jt(t,n,e){const o=It(),r=o[0],s=Ct(r._hooksData,o[1],()=>({hookState:e?e(n):Ut(null,n)}));return[s.hookState,s.args||(s.args=n=>{const e=t(s.hookState,n);s.hookState=e,r.setState(Bt)})]}function Gt(t){return Lt(()=>({current:t}),[])}function Zt(t){return Jt(Ut,t)}function zt(){return Wt(gt)}function Qt(t){function n(n){const e=y(n,["ref"]);return t(e,n.ref)||null}return n.__REF_FORWARDED=!0,n}l({createElement(t,n){t&&t.type&&t.type.__REF_FORWARDED&&(t.props.ref=n,t.ref=null)}});export{kt as A,lt as AsyncComponent,G as Component,s as Fragment,St as Path,vt as Router,pt as RouterSubscription,l as addPluginCallback,p as config,X as createContext,w as createElement,R as createRef,yt as createRoutePath,G as default,rt as diff,Qt as forwardRef,w as h,ft as loadURL,ht as redirect,st as render,Ft as useCallback,Wt as useContext,jt as useEffect,Kt as useLayoutEffect,Lt as useMemo,Jt as useReducer,Gt as useRef,zt as useRoute,Zt as useState};
//# sourceMappingURL=ui-lib.modern.js.map
