!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).uiLib={})}(this,(function(e){var n="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,t="keys"in Object?function(e,n){for(var t=0,o=Object.keys(n);t<o.length;t++){var r=o[t];e[r]=n[r]}return e}:function(e,n){for(var t in n)e[t]=n[t];return e};function o(e,n,t,o){void 0===o&&(o=!1);var r=[];return function e(n,i){var l=n,a=Array.isArray(l),u=0;for(l=a?l:l[Symbol.iterator]();;){var s;if(a){if(u>=l.length)break;s=l[u++]}else{if((u=l.next()).done)break;s=u.value}var p=s;Array.isArray(p)&&i>0?e(p,i-1):o&&null==p||r.push(t?t(p):p)}}(e,~~n||1),r}var r={},i=[],l={setAttribute:function(e,n,t){return n in e?e[n]=null==t?"":t:null==t?e.removeAttribute(n):e.setAttribute(n,t)}},a=function(e){return"o"===e[0]&&"n"===e[1]};function u(e,n){if(null!=n){var t,o,r;(o=null!=(t=n._vNode))&&(r=n._vNode._nextDomNode),(n.parentNode!==e||t._reorder)&&(null!=r?e.insertBefore(n,r):t._reorder||e.appendChild(n));var i=n.previousSibling,l=n.nextSibling;if(i!=l){if(null!=i){var a=i._vNode;null!=a&&a._nextDomNode!==n&&s(a,n,"_nextDomNode")}if(null!=l){var u=l._vNode;null!=u&&u._nextDomNode!==n&&s(u,n,"_prevDomNode")}o&&(t._prevDomNode=i,t._nextDomNode=l)}}}function s(e,n,t){null!=e&&(e[t]=n,s(e._prevVnode,n,t))}function p(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),l=2;l<r;l++)i[l-2]=arguments[l];if(null==e||"boolean"==typeof e)return null;n=null==n?{}:t({},n),i.length&&(i=o(i,Infinity),n.children=i);var u=n.ref;u&&delete n.ref;var s=n.key;s&&delete n.key;var p={};for(var c in n)a(c)&&(p[c.substr(2).toLowerCase()]=n[c]);return d(e,n,p,s,u)}function c(){}function d(e,n,t,o,r){var i={type:e,props:n,events:t,key:o,_reorder:!1,ref:r,_children:null,_dom:null,_component:null,__uAttr:null,_nextDomNode:null,_prevDomNode:null,_prevVnode:null};return i.__uAttr=i}function f(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return d(null,String(e));if(Array.isArray(e))return p(c,null,e);if(null!=e._dom){var n=d(e.type,e.props,e.events,e.key,null);return n._dom=e._dom,n}return e}var m=function(e,n){for(var t=arguments.length,o=new Array(t>2?t-2:0),r=2;r<t;r++)o[r-2]=arguments[r];if(e.__currentLifeCycle=n,null!=e[n])try{var i=function(){return e[n].apply(e,o)};return"function"==typeof Promise?Promise.resolve(i()).catch((function(n){return e.componentDidCatch(n)})):i()}catch(n){if(null==e.componentDidCatch)throw n;e.componentDidCatch(n)}};function v(e,n){if(e){for(var t=arguments.length,o=new Array(t>2?t-2:0),r=2;r<t;r++)o[r-2]=arguments[r];m.apply(void 0,[e,n].concat(o))}}function _(e){if(e!==r&&null!=e){e._prevVnode&&_(e._prevVnode);var n=e._dom,t=e._component;if(v(t,"componentWillUnmount",!0),null!=t&&(t.base=t._vnode=null),n){if(null!=e){null!=e._nextDomNode&&s(e._nextDomNode._vNode,null,"_prevDomNode"),null!=e._prevDomNode&&s(e._prevDomNode._vNode,null,"_nextDomNode");var o=e._children||i,l=Array.isArray(o),a=0;for(o=l?o:o[Symbol.iterator]();;){var u;if(l){if(a>=o.length)break;u=o[a++]}else{if((a=o.next()).done)break;u=a.value}_(u)}e._prevVnode=e._component=e._dom=e._prevDomNode=e._nextDomNode=null}if(Array.isArray(n))for(var p;p=e._children.pop();)h(p);else h(n);n.onclick=n._component=n._listeners=n._prevVnode=n._vNode=null}}}function h(e){var n=e.parentNode;n&&n.removeChild(e)}function y(e){for(var n;n=e.pop();)v(n,"componentDidMount"),n._didMount=!0}function b(e,n,t,o){var i,l=e.type;if(o)"string"==typeof e.props?i=document.createTextNode(e.props):x(i=document.createElement(l),e,r);else{if(l!==n.type)return b(e,null,null,!0);if(i=t,t instanceof Text){var a=e.props;t.nodeValue!==a&&(t.nodeValue=a)}else x(i,e,n)}return null!=e._prevVnode&&(e._prevVnode._dom=i),i}var g=function(e){return"key"!==e&&"children"!==e};function x(e,n,t){if(!(e instanceof Text)){for(var o=n.props,i=e.attributes,u=n.events,s=null!=t?t.events:r,p=0;p<i.length;p++){var d=i[p].name;d in o||l.setAttribute(e,d,null)}for(var f in o)if(!a(f)&&g(f)){var m=o[f],v=(f="class"===f?"className":f)in e?e[f]:e.getAttribute(f);if("className"===f&&Array.isArray(m))m=m.join(" ");else if("style"===f){var _=e.style;if("string"==typeof m)_.cssText=m;else for(var h in"string"==typeof v?_.cssText="":v&&(v.cssText=""),m){var y=m[h];v&&y===v[h]||(_[h]=y)}continue}v!==m&&l.setAttribute(e,f,m)}!function(e,n,t){if(e!=n){for(var o in null==t._listeners&&(t._listeners={},t.onclick=c),null==n&&(n=r),null==e&&(e=r),e){var i=e[o];n[o]!==i&&null!=i&&(t.addEventListener(o,C),t._listeners[o]=i)}for(var l in n)null==e[l]&&(delete t._listeners[l],t.removeEventListener(l,C))}}(u,s,e)}}function C(e){return this._listeners[e.type](e)}function A(e,n,t,o,i,l,a){for(var s=e._children,p=s.length,c=n.length,d=[],f=0;f<Math.max(p,c);f++){var m=s[f],v=n[f]||r,h=void 0;if(null!=m){var y=m._nextDomNode||v._nextDomNode;if(v===r&&null!=(h=N(n,c,f))){var b=h._dom;y=Array.isArray(b)?b[0]:b,m._reorder=!0}m._nextDomNode=y;var g=w(t,m,v,o,i,l,a);Array.isArray(g)||(u(t,g),d.push(g))}else null!=v&&_(v)}return d}function N(e,n,t){for(var o;t<n&&!(o=e[t]);t++);return o}var S=[],k=function(){function e(e,n){this.props=e,this.context=n,this.state={}}var o=e.prototype;return o.render=function(e,n){},o.setState=function(e){this._nextState=t({},this.state||r),this._oldState=t({},this._nextState);var o,i="function"==typeof e?e=e(this._nextState,this.props):e;null!=i&&(t(this._nextState,i),t(this.state,this._nextState),(o=this)._dirty=!0,1===S.push(o)&&(null!=window.requestAnimationFrame?window.requestAnimationFrame(D):n(D)))},o.forceUpdate=function(e){var n=this.parentDom,t=[];if(n){var o=this._vnode;this.base=w(n,o,o,this.context,t,this,!1!==e),this.base instanceof Node&&!this.base.parentNode&&u(n,this.base)}e&&e(),y(t)},e}();function D(){var e;for(S.sort((function(e,n){return e._depth-n._depth}));e=S.pop();)e._dirty&&(e._nextState=null,e._dirty=!1,e.forceUpdate(!1))}function P(e,n,t){return this.constructor(e,t)}function w(e,n,l,a,u,s,p){if("boolean"==typeof n&&(n=null),null==l||null==n||l.type!==n.type){if(null!=l&&l!==r&&_(l),null==n)return null;l=r}var d=l===r;if(n.__uAttr!==n)return console.warn("component not of expected type =>",n),null;n._children=o(n.props&&n.props.children||i,Infinity,f);var m=n.type;if(m===c||l.type===c)return A(n,d?i:l._children||i,e,a,u,s,p);if("function"==typeof m){var h,y=function(e,n,o,i,l,a,u){var s,p,c,d=e.type;if(n._component){if((s=e._component=n._component).base=e._dom=n._dom,s.props=e.props,s.context=l,c=!1,!a)if(null!=s.shouldComponentUpdate&&!1!==s.shouldComponentUpdate(e.props,s.state));else if(null!=s.shouldComponentUpdate)return{node:r,shouldUpdate:!1}}else c=!0,d.prototype&&d.prototype.render?(s=e._component=new d(e.props,l),i.push(s)):(s=new k(e.props,l),e._component=null,s.constructor=d,s.render=P);return s.parentDom=o,null==s.state&&(s.state={}),s._nextState=t({},s.state),null!=d.getDerivedStateFromProps&&(t(s._nextState,d.getDerivedStateFromProps(e.props,s._nextState)||r),t(s._oldState||(s._oldState={}),s._nextState)),c?v(s,"componentWillMount"):v(s,"componentWillUpdate",e.props,s._nextState,l),s.state=s._nextState,(p=s._prevVnode=f(s.render(e.props,s.state)))&&(p._dom=e._dom,p._reorder=e._reorder),s._depth=u?1+~~u._depth:0,{node:p,shouldUpdate:!c}}(n,l,e,u,a,p,s);h=y.node;var g=y.shouldUpdate;if(null!=n._component&&(n._component._vnode=n),h===r)return null;var x=n._dom=w(e,h,"_prevVnode"in l?l._prevVnode:l,a,u,n._component,p);if(null==h)return;return h._dom=x,null!=n._component&&(n._component.base=x),g&&v(n._component,"componentDidUpdate",l.props,(l._component||r)._oldState),null!=l._component&&delete l._component._oldState,n._prevVnode=h,null==x||Array.isArray(x)||(x._vNode=n),x}n._dom=d?b(n,null,null,!0):b(n,l,l._dom,!1),null!=s&&(s.base=n._dom);var C=n._dom;return C._vNode=n,A(n,d?i:l._children||i,C,a,u,n._component,p),C}function V(e){if("#comment"===e.nodeName)return null;if(e instanceof Text)return e.nodeValue;var n=p(e.tagName.toLowerCase(),null,Array.from(e.childNodes).map(V));return n._dom=e,e._vNode=e._oldVnode=n,n}function U(){return(U=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function L(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}function O(e,n){if(null==e)return{};var t,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n.indexOf(t=i[o])>=0||(r[t]=e[t]);return r}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T=function(e){function n(n,t){var o,r=n.componentPromise,i=n.fallbackComponent,l=O(n,["componentPromise","fallbackComponent"]);return(o=e.call(this,l,t)||this).state={ready:!1,componentPromise:r,finalComponent:null,fallbackComponent:i},o}L(n,e),n.getDerivedStateFromProps=function(e,n){var t=n||{};return t.componentPromise===e.componentPromise?t:(null!=e.componentPromise&&(t.componentPromise=e.componentPromise,t.ready=!1,t.finalComponent=null),t)};var t=n.prototype;return t.render=function(e,n){var t=e.eager,o=void 0===t||t,r=e.loadComponent,i=void 0!==r&&r,l=O(e,["eager","loadComponent"]),a=n.ready,u=n.finalComponent;if(!o&&!i||a||this.loadComponent(),a)return p(u,l);var s=O(l,["children"]);return null!=this.state.fallbackComponent?p(this.state.fallbackComponent,s):E},t.loadComponent=function(){var e=this;return this.state.componentPromise().then((function(n){e.setState({ready:!0,finalComponent:n})}))},n}(k),E=p("div",null,"Loading.."),F=[],R={subscribe:function(e){F.includes(e)||F.push(e)},unsubscribe:function(e){for(var n=0;n<F.length;n++)if(F[n]===e)return F.splice(n,1)},emit:function(e,n){var t=F,o=Array.isArray(t),r=0;for(t=o?t:t[Symbol.iterator]();;){var i;if(o){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}i(e,n)}},unsubscribeAll:function(){F.length=0}};function I(e){window.history.pushState(r,document.title,e),R.emit(e,{type:"load",native:!1})}var M=function(e){L(o,e),o.__emitter=function(){R.emit(o.getPath+o.getQs,{type:"popstate",native:!0})};var n,t=o.prototype;function o(n,t){var o,r=n.children,i=n.fallbackComponent,l=O(n,["children","fallbackComponent"]);o=e.call(this,l,t)||this,i=i||o._notFoundComponent.bind(j(o)),o.state={routes:[],fallbackComponent:i},o.initComponents(r);var a=o.getCurrentComponent(),u=a[1];return o.component=a[0],o.match=u,o._routeChangeHandler=o._routeChangeHandler.bind(j(o)),o}return t.componentWillMount=function(){R.subscribe(this._routeChangeHandler),window.addEventListener("popstate",o.__emitter)},t.componentWillUnmount=function(){window.removeEventListener("popstate",o.__emitter),this.props.destroySubscriptionOnUnmount&&R.unsubscribeAll()},t.absolute=function(e){return new URL(e||"",location.protocol+"//"+location.host).toString()},t.getCurrentComponent=function(){return this.getPathComponent(o.getPath)||[]},t._routeChangeHandler=function(){var e=this.getCurrentComponent(),n=e[0],t=e[1];this.component=this.match=null,this.setState({component:n,match:t})},t._notFoundComponent=function(){return p("div",null,'The Requested URL "'+this.absolute(o.getPath)+'" was not found')},t.getPathComponent=function(e){var n=this.state.routes,t=Array.isArray(n),o=0;for(n=t?n:n[Symbol.iterator]();;){var r;if(t){if(o>=n.length)break;r=n[o++]}else{if((o=n.next()).done)break;r=o.value}var i=r.component,l=r.regex.exec(e);if(l)return[i,l]}return[]},t.initComponents=function(e){var n=e,t=Array.isArray(n),o=0;for(n=t?n:n[Symbol.iterator]();;){var r;if(t){if(o>=n.length)break;r=n[o++]}else{if((o=n.next()).done)break;r=o.value}null!=r.props&&null!=r.props.path&&this.state.routes.push({regex:r.props.path,component:r})}},(n=[{key:"getPath",get:function(){return location.pathname}},{key:"getQs",get:function(){return location.search}}])&&function(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(o,n),t.render=function(){var e;return(e=null!=this.state.component&&null!=this.state.match?this.state.component:this.component?this.component:p(this.state.fallbackComponent,this.props)).__uAttr||(e=p(e,U({match:this.state.match},this.props))),p(c,null,e)},o}(k);e.A=function(e){var n=e.native,t=e.href,o=e.onClick,r=O(e,["native","href","onClick"]);return r.href=t,n||null==t||(r.onClick=function(n){return function(e,n,t){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),I(n),null!=t&&t(e,n))}(n,e.href,o)}),p("a",r)},e.AsyncComponent=T,e.Component=k,e.Fragment=c,e.Router=M,e.RouterSubscription=R,e.absolutePath=function(e){return RegExp("^"+e+"(/?)$")},e.createElement=p,e.default=k,e.h=p,e.loadURL=I,e.redirect=function(e){window.history.replaceState(r,document.title,e),R.emit(e,{type:"redirect",native:!1})},e.render=function(e,n){var t=p(c,null,e);if(n.hasChildNodes())return function(e,n){var t=Array.from(e.childNodes),r=p(c,null,t.map(V));r._dom=t,r._children=o(r.props&&r.props.children||i,Infinity,f),e._oldVnode=r;var l=[];w(e,n,r,{},l,null,!1),y(l)}(n,t);var r=[],l=n._oldVnode;n._oldVnode=e,w(n,t,l,{},r,null==l?null:l._component,!1),y(r)}}));
//# sourceMappingURL=ui-lib.umd.js.map
